if (self.CavalryLogger) { CavalryLogger.start_js(["VVWx7"]); }

__d("CometUFICommentsCount_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFICommentsCount_feedback",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"comment_count",args:null,concreteType:"TopLevelCommentsConnection",kind:"LinkedField",name:"top_level_comments",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null}],storageKey:null},{alias:"i18n_comment_count",args:null,kind:"ScalarField",name:"comment_count_reduced",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("CometUFINewShareActionLinkMenuQuery$Parameters",[],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:"2910318152416600",metadata:{relayPreloadable:!0},name:"CometUFINewShareActionLinkMenuQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometUFINewShareActionLink_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"useDefaultActor"}],kind:"Fragment",metadata:null,name:"CometUFINewShareActionLink_feedback",selections:[{alias:null,args:[{kind:"Variable",name:"use_default_actor",variableName:"useDefaultActor"}],concreteType:null,kind:"LinkedField",name:"viewer_actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("CometUFINewShareActionLink_shareable.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFINewShareActionLink_shareable",selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometUFINewShareActionLinkMenu_shareable"},{args:null,kind:"FragmentSpread",name:"CometUFIShareActionLinkMenuRelay3D_shareable"}],type:"Entity",abstractKey:"__isEntity"};e.exports=a}),null);
__d("CometUFIReactionsDialogQuery$Parameters",[],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:"3646397122054235",metadata:{relayPreloadable:!0},name:"CometUFIReactionsDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometUFIShareActionLinkMenuRelay3DQuery$Parameters",[],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:"3088914321221664",metadata:{relayPreloadable:!0},name:"CometUFIShareActionLinkMenuRelay3DQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometUFITopReactions_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFITopReactions_feedback",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[{kind:"Literal",name:"orderby",value:["COUNT_DESC","REACTION_TYPE"]}],concreteType:"TopReactionsConnection",kind:"LinkedField",name:"top_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"TopReactionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:"i18n_reaction_count",args:null,kind:"ScalarField",name:"reaction_count_reduced",storageKey:null},{alias:null,args:null,concreteType:"FeedbackReactionInfo",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"localized_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reaction_type",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'top_reactions(orderby:["COUNT_DESC","REACTION_TYPE"])'}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("CometVideoHomeThreeDotContextMenuWrapper_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometVideoHomeThreeDotContextMenuWrapper_video",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("CometVideoHomeVideoContextMenuContentsQuery$Parameters",[],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:"3299297666831043",metadata:{relayPreloadable:!0},name:"CometVideoHomeVideoContextMenuContentsQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometUFICommentsCount.react",["fbt","CometFeedARIAProperties.react","CometPressable.react","CometRelay","CometUFITooltip.react","JSResource","React","TetraText.react","stylex","unrecoverableViolation","CometUFICommentsCount_feedback.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;b("CometRelay").graphql;var i=b("CometRelay").useFragment,j=b("React");c=b("React");var k=c.useCallback,l=c.useContext,m=b("JSResource")("CometUFICommentsCountTooltipContent.react").__setRef("CometUFICommentsCount.react"),n={link:{appearance:"dwo3fsh8",backgroundColor:"g5ia77u1",borderStyle:"ow4ym5g4",borderWidth:"auili1gw",boxSizing:"rq0escxv",cursor:"nhd2j8a9",marginBottom:"oygrvhab",marginEnd:"cxmmr5t8",marginStart:"hcukyx3x",marginTop:"kvgmc6g5",paddingBottom:"qt6c0cv9",paddingEnd:"rz4wbd8a",paddingStart:"a8nywdso",paddingTop:"jb3vyjys",position:"l9j0dhe7",textAlign:"i1ao9s8h",zIndex:"du4w35lb",color:"gmql0nx0",":hover":{textDecoration:"gpro0wi8"}}};function a(a){var c=a.feedback,d=a.onClick;a=a.textType;a=a===void 0?"body3":a;var e=k(function(){d&&d()},[d]);c=i(h!==void 0?h:h=b("CometUFICommentsCount_feedback.graphql"),c);var f=c.comment_count,o=c.i18n_comment_count,p=c.id;c=c.url;var q=l(b("CometFeedARIAProperties.react"));f=f==null?void 0:f.total_count;if(f==null)throw b("unrecoverableViolation")("CometUFICommentsCount: Expected a comments count","ufi2");else if(f===0)return null;if(c==null)throw b("unrecoverableViolation")("CometUFICommentsCount: Expected feedback target to have a url","ufi2");if(p==null)throw b("unrecoverableViolation")("CometUFICommentsCount: Expected feedback target to have an id","ufi2");return j.jsx(b("CometUFITooltip.react"),{tooltipContentComponent:m,tooltipContentProps:{queryVariables:{feedbackTargetID:p}},children:j.jsx(b("CometPressable.react"),babelHelpers["extends"]({},q.commentCountTargetProps,{display:"inline",onPress:e,overlayDisabled:!0,ref:q.commentCountTargetRef,testid:void 0,xstyle:n.link,children:j.jsx(b("TetraText.react"),{color:"secondary",type:a,children:g._({"*":"{number} comments","_1":"1 comment"},[g._plural(f,"number",o)])})}))})}e.exports=a}),null);
__d("CometUFINewShareActionLinkMenu.entrypoint",["JSResourceForInteraction","CometUFINewShareActionLinkMenuQuery$Parameters"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){var c=a.disableMessenger;a=a.url;return{extraProps:{disableMessenger:c},queries:{shareMenuQueryReference:{parameters:b("CometUFINewShareActionLinkMenuQuery$Parameters"),variables:{params:{url:a}}}}}},root:b("JSResourceForInteraction")("CometUFINewShareActionLinkMenu.react",{"class":"responsive",name:"Comet Video Home UFI Share Action Link Menu",oncall:"watch_www_bug_rotation"}).__setRef("CometUFINewShareActionLinkMenu.entrypoint")};e.exports=a}),null);
__d("CometUFIShareActionLinkMenuRelay3D.entrypoint",["JSResourceForInteraction","CometUFIShareActionLinkMenuRelay3DQuery$Parameters"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){a=a.url;return{extraProps:{},queries:{shareMenuQueryReference:{parameters:b("CometUFIShareActionLinkMenuRelay3DQuery$Parameters"),variables:{params:{url:a}}}}}},root:b("JSResourceForInteraction")("CometUFIShareActionLinkMenuRelay3D.react",{"class":"responsive",name:"Comet UFI Share Action Link Menu with Relay 3D",oncall:"ufight_club"}).__setRef("CometUFIShareActionLinkMenuRelay3D.entrypoint")};e.exports=a}),null);
__d("CometUFINewShareActionLink.react",["ix","fbt","requireDeferred","CometEntryPointPopoverTrigger.react","CometPressable.react","CometRelay","CometTrackingNodeProvider.react","CometUFINewShareActionLinkMenu.entrypoint","CometUFIShareActionLinkMenuRelay3D.entrypoint","React","TetraIcon.react","fbicon","gkx","qex","stylex","CometUFINewShareActionLink_shareable.graphql","CometUFINewShareActionLink_feedback.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k;b("CometRelay").graphql;var l=b("CometRelay").useFragment,m=b("React");c=b("React");var n=c.useRef,o=b("requireDeferred")("ShareMetricsLoggingController"),p={button:{alignItems:"bp9cbjyn",color:"m9osqain",display:"j83agx80",flexBasis:"rj1gh0hx",flexGrow:"buofh1pr",flexShrink:"pfnyh3mw",fontSize:"jq4qci2q",fontWeight:"lrazzd5p",height:"k7cz35w2",justifyContent:"taijpn5t",lineHeight:"jiuqdcnw",paddingTop:"jb3vyjys",paddingEnd:"n8tt0mok",paddingBottom:"qt6c0cv9",paddingStart:"hyh9befq",position:"l9j0dhe7",textDecoration:"esuyzwwr"},buttonPressable:{flexGrow:"buofh1pr",transitionDuration:"ms05siws",transitionProperty:"flx89l3n",transitionTimingFunction:"ogy3fsii"},buttonPressed:{transform:"mtfd0dr2"},icon:{display:"j83agx80",marginEnd:"fv0vnmcu"},root:{alignItems:"bp9cbjyn",display:"j83agx80",flexBasis:"rj1gh0hx",flexGrow:"buofh1pr",flexShrink:"pfnyh3mw",justifyContent:"taijpn5t",":hover":{backgroundColor:"gfay22hk",borderTopStartRadius:"i3s4pi26",borderTopEndRadius:"otbi8bnk",borderBottomEndRadius:"gj36ivs1",borderBottomStartRadius:"p2cu3d7g",textDecoration:"p8dawk7l"}}};d=Boolean(b("qex")._("1531378"));var q=d?b("CometUFIShareActionLinkMenuRelay3D.entrypoint"):b("CometUFINewShareActionLinkMenu.entrypoint");function a(a){var c=a.align,d=a.buttonXStyle,e=a.feedback,f=a.rootXStyle;a=a.shareable;var r=n(!1);a=l(i!==void 0?i:i=b("CometUFINewShareActionLink_shareable.graphql"),a);e=l(j!==void 0?j:j=b("CometUFINewShareActionLink_feedback.graphql"),e);var s=a.url,t=function(a){r.current&&!a?o.onReady(function(a){a.log("share_abandoned")}):!r.current&&a&&o.onReady(function(a){a.log("share_flow_started")}),r.current=a};if(s==null)return null;return(e==null?void 0:(e=e.viewer_actor)==null?void 0:e.__typename)!=="User"&&!b("gkx")("1277498")?null:m.jsx("span",{className:(k||(k=b("stylex")))(p.root,f),children:m.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:17,children:m.jsx(b("CometEntryPointPopoverTrigger.react"),{align:c,autoAlign:!0,entryPointParams:{url:s},onVisibilityChange:t,otherProps:{shareable:a},popoverEntryPoint:q,preloadTrigger:"button",children:function(a,c,e,f,i,j){return m.jsx(b("CometPressable.react"),{display:"block",label:h._("Send this to friends or post it on your Timeline."),onHoverIn:f,onHoverOut:i,onPress:c,onPressIn:j,overlayDisabled:!0,ref:a,testid:void 0,xstyle:function(a){a=a.pressed;return[p.buttonPressable,a&&p.buttonPressed]},children:m.jsxs("div",{className:(k||(k=b("stylex")))(p.button,d),children:[m.jsx("div",{className:k(p.icon),children:m.jsx(b("TetraIcon.react"),{color:"secondary",icon:b("fbicon")._(g("484399"),18),size:18})}),h._("Share")]})})}})})})}e.exports=a}),null);
__d("CometUFIReactionsDialog.entrypoint",["JSResourceForInteraction","WebPixelRatio","CometUFIReactionsDialogQuery$Parameters"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){var c=a.feedbackTargetID;a=a.reactionType;return{queries:{cometUFIReactionsQueryReference:{options:{fetchPolicy:"store-and-network"},parameters:b("CometUFIReactionsDialogQuery$Parameters"),variables:{feedbackTargetID:c,reactionType:(c=a)!=null?c:"NONE",scale:b("WebPixelRatio").get()}}}}},root:b("JSResourceForInteraction")("CometUFIReactionsDialog.react",{"class":"fluid",name:"Comet UFI Reactions Dialog",oncall:"ufight_club"}).__setRef("CometUFIReactionsDialog.entrypoint")};e.exports=a}),null);
__d("useCometUFISubscriptionManager",["JSScheduler","React","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useCallback,h=c.useRef;function a(){var a=h(new Set()),c=h(new Set()),d=h(!1),e=g(function(b){a.current.add(b);d.current&&b.subscribe();return{dispose:function(){b.unsubscribe(),a.current["delete"](b)}}},[]),f=g(function(){d.current||(d.current=!0,a.current.forEach(function(a){var e=b("JSScheduler").scheduleSpeculativeCallback(function(){!d.current?b("recoverableViolation")("Scheduled callback to activate subscription was not canceled","ufi2"):(c.current["delete"](e),a.subscribe())});c.current.add(e)}))},[]),i=g(function(){d.current&&(d.current=!1,a.current.forEach(function(a){return a.unsubscribe()}),c.current.forEach(function(a){return b("JSScheduler").cancelCallback(a)}),c.current.clear())},[]);return[e,f,i]}e.exports=a}),null);
__d("CometUFIRealtimeRoot.react",["React","UFI2RealtimeContext","useCometUFISubscriptionManager"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useEffect;function a(a){var c=a.children;a=a.enabled;var d=a===void 0?!0:a;a=b("useCometUFISubscriptionManager")();var e=a[0],f=a[1],i=a[2];h(function(){if(d){f();return function(){i()}}},[d,f,i]);return g.jsx(b("UFI2RealtimeContext").Provider,{value:e,children:c})}e.exports=a}),null);
__d("CometUFICommentListState",["CometUFICommentListStateConfig","ErrorNormalizeUtils","FBLogger","UFI2ViewOption","gkx","recoverableViolation","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){var b=a.count,c=a.direction,d=a.error,e=a.hasMore,f=a.isLoading,g=a.pageSize;a=a.totalCount;if(a!=null&&a===0)return null;if(b===0)return null;return!e?null:{__type:"PAGER",count:Math.min(b,g),direction:c,status:{error:d,pending:f}}}function h(a){var b=a.count,c=a.expanded;a=a.minCountToShowCollapser;if(!c)return null;if(a==null)return null;return b<=a?null:{__type:"REPLIES_COLLAPSER",count:b}}function i(a){var b=a.error,c=a.expanded,d=a.isLoading;a=a.totalCount;return c||a===0?null:{__type:"REPLIES_EXPANDER",count:a,status:{error:b,pending:d}}}function j(a){var b=a.direction;a=a.page;if(b==="forward"){b=Math.max(0,a.afterCount-1);return babelHelpers["extends"]({},a,{afterCount:b,hasNext:b>0})}b=Math.max(0,a.beforeCount-1);return babelHelpers["extends"]({},a,{beforeCount:b,hasPrevious:b>0})}function k(a,c){var d=l(a,c);if(a.__type!=="INITIAL_STATE"&&c==null)throw b("unrecoverableViolation")("Expected state not to be null","ufi2");return d}function l(a,c){if(a.__type==="INITIAL_STATE"){var d,e=a.args,f=e.afterCount,k=e.beforeCount,l=e.canViewerComment,m=e.commentIDs,o=e.commentsByID,q=e.feedbackTargetID,u=e.hasNext,v=e.hasPrevious,w=e.hiddenCommentIDs,x=e.initiallyExpanded,y=e.isListVisible,z=e.pageSize,A=e.shouldRenderComposerPreemptively,B=e.topLevelFeedbackTargetID,C=e.totalCount;e=e.viewOption;d={backward:g({count:k,direction:"backward",error:null,hasMore:v,isLoading:(d=c==null?void 0:(d=c.pagers)==null?void 0:(d=d.backward)==null?void 0:(d=d.status)==null?void 0:d.pending)!=null?d:!1,pageSize:z,totalCount:C}),forward:g({count:f,direction:"forward",error:null,hasMore:u,isLoading:(d=c==null?void 0:(d=c.pagers)==null?void 0:(d=d.forward)==null?void 0:(d=d.status)==null?void 0:d.pending)!=null?d:!1,pageSize:z,totalCount:C})};var ea={};w.forEach(function(a){ea[a]="COLLAPSED"});w={canViewerComment:l,commentPages:m.length>0?[{__type:"COMMENTS_PAGE",afterCount:f,beforeCount:k,commentIDs:m,hasNext:u,hasPrevious:v,state:"VISIBLE"}]:[],commentsByID:o,commentsHiddenByViewer:ea,expanded:(z=c==null?void 0:c.expanded)!=null?z:x,feedbackTargetID:q,hasPaged:{backward:!1,forward:!1},isListVisible:y,locallyComposedCommentIDs:[],newCommentsPage:{__type:"NEW_COMMENTS_PAGE",commentIDs:[],visibleStates:{}},pagers:d,shouldComposerRenderWhenListIsExpanded:A,topLevelFeedbackTargetID:B,viewOption:e};if(a.args.depth===0)return babelHelpers["extends"]({},w,{__type:"DEPTH_0",status:{error:null,pending:!1}});l=a.args.minCountToShowCollapser;f=null;c!=null&&c.__type==="DEPTH_1"&&(f=c.repliesExpander);return babelHelpers["extends"]({},w,{__type:"DEPTH_1",repliesCollapser:h({count:m.length,expanded:x,minCountToShowCollapser:l}),repliesExpander:i({error:null,expanded:(k=c==null?void 0:c.expanded)!=null?k:x,isLoading:(o=(u=f)==null?void 0:(v=u.status)==null?void 0:v.pending)!=null?o:!1,totalCount:C})})}if(c==null)throw b("unrecoverableViolation")("Expected state not to be null","ufi2");switch(a.__type){case"COLLAPSE_LIST":z=a.args;q=z.depth;y=z.totalCount;if(c.expanded===!1)return c;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{expanded:!1});d=t.getCommentsCount({depth:q,state:c})===0;A=y>0&&d===!0;A&&b("FBLogger")("ufi2").warn("UFI2CommentsListState.updater(...): COLLAPSE_LIST: expected list not to be empty if connection is not empty");return babelHelpers["extends"]({},c,{expanded:!1,repliesCollapser:null,repliesExpander:i({error:c.repliesExpander?c.repliesExpander.status.error:null,expanded:!1,isLoading:!1,totalCount:y})});case"DELETE_COMMENT":B=a.args;var D=B.commentID;e=B.depth;w=c.commentPages;m=c.locallyComposedCommentIDs;var E=c.newCommentsPage;if(w.length===0&&E.commentIDs.length===0)return c;l=E.commentIDs.filter(function(a){return a!==D});k=t.getVisibleCommentsCount({depth:e,state:c});x=l.length<E.commentIDs.length;if(x){var fa={};l.forEach(function(a){fa[a]=E.visibleStates[a]});f=babelHelpers["extends"]({},E,{commentIDs:l,visibleStates:fa});u=w.map(function(a){return j({direction:"backward",page:a})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:u,newCommentsPage:f});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");v=a.args.minCountToShowCollapser;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:u,newCommentsPage:f,repliesCollapser:h({count:k-1,expanded:c.expanded,minCountToShowCollapser:v})})}var F=null,G=!1;o=w.map(function(a,b){if(G)return j({direction:"backward",page:a});var c=a.commentIDs.filter(function(a){return a!==D});if(c.length<a.commentIDs.length){G=!0;F=b;return babelHelpers["extends"]({},a,{commentIDs:c})}return a}).map(function(a,b){return a&&F!=null&&b<F?j({direction:"forward",page:a}):a}).filter(Boolean);if(G===!1){b("FBLogger")("ufi2").warn("CometUFICommentListState.updater(...): Tried deleting a comment that isnt present");return c}C=m.filter(function(a){return a!==D});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:o,locallyComposedCommentIDs:C});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:o,locallyComposedCommentIDs:C,repliesCollapser:h({count:k-1,expanded:c.expanded,minCountToShowCollapser:a.args.minCountToShowCollapser})});case"EXPAND_HIDDEN_COMMENTS":z=a.args.commentIDs;var ga=c.commentsHiddenByViewer,H=babelHelpers["extends"]({},ga);z.forEach(function(a){var c=ga[a];if(c==null){b("FBLogger")("ufi2").warn("CometUFICommentListState.updater(...): Tried expanding a comment that is not hidden");return}c==="COLLAPSED"&&(H[a]="EXPANDED")});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:H}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:H});case"EXPAND_LIST":q=a.args;d=q.depth;A=q.totalCount;y=c.commentPages;B=c.newCommentsPage;if(c.expanded===!0&&c.shouldComposerRenderWhenListIsExpanded===!0)return c;if(d!==0&&t.isRepliesExpanderLoading({depth:d,state:c}))return c;if(A===0)return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!0,repliesCollapser:null,repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0});e=t.getVisibleCommentsCount({depth:d,state:c});if(e===0){x=t.getCommentsCount({depth:d,state:c})===0;if(b("gkx")("1567108")?B.commentIDs.length===0&&y.length===0:x)return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0,status:{error:null,pending:!0}}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!1,repliesCollapser:null,repliesExpander:i({error:null,expanded:!1,isLoading:!0,totalCount:A})});l=y.length>0?y[0]:null;u=l!=null?[babelHelpers["extends"]({},l,{state:"VISIBLE"})].concat(y.slice(1)):y;var ha={};B.commentIDs.forEach(function(a){ha[a]="VISIBLE"});f=babelHelpers["extends"]({},B,{visibleStates:ha});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:u,expanded:!0,newCommentsPage:f,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");v=(l!=null?l.commentIDs.length:0)+B.commentIDs.length;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:u,expanded:!0,newCommentsPage:f,repliesCollapser:h({count:v,expanded:!0,minCountToShowCollapser:a.args.minCountToShowCollapser}),repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0})}if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!0,repliesCollapser:h({count:e,expanded:!0,minCountToShowCollapser:a.args.minCountToShowCollapser}),repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0});case"FAIL_COMMENT_PAGINATION":if(b("gkx")("1566456")===!1)return c;w=a.args;m=w.depth;o=w.direction;C=w.error;if(o==="forward"&&m!==0&&c.__type==="DEPTH_1"&&t.isRepliesExpanderLoading({depth:m,state:c}))return c.repliesExpander!=null?babelHelpers["extends"]({},c,{__type:"DEPTH_1",repliesExpander:babelHelpers["extends"]({},c.repliesExpander,{status:babelHelpers["extends"]({},c.repliesExpander.status,{error:C,pending:!1})})}):c;k=t.isPagerLoading({depth:m,direction:o,state:c})===!0;if(k===!1)return c;z=c.pagers.backward;q=c.pagers.forward;d=babelHelpers["extends"]({},c.pagers,{backward:o==="backward"&&z!=null?babelHelpers["extends"]({},z,{status:{error:C,pending:!1}}):z,forward:o==="forward"&&q!=null?babelHelpers["extends"]({},q,{status:{error:C,pending:!1}}):q});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",pagers:d});else return babelHelpers["extends"]({},c,{__type:"DEPTH_1",pagers:d});case"HIDE_COMMENTS":x=a.args.commentIDs;A=c.commentsHiddenByViewer;var I=babelHelpers["extends"]({},A);x.forEach(function(a){I[a]="LOCALLY_HIDDEN"});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:I}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:I});case"RECEIVE_COMMENTS_PAGE":y=c.commentPages;l=c.locallyComposedCommentIDs;var J=c.newCommentsPage;B=c.pagers;u=a.args;var K=u.commentIDs;f=u.depth;v=u.direction;e=u.feedbackTargetID;w=u.hiddenCommentIDs;m=u.pageSize;var L=t.isPagerLoading({depth:f,direction:v,state:c})===!0;k=f!==0&&t.isRepliesExpanderLoading({depth:f,state:c});var ia=f===0&&!L;z=J.commentIDs.filter(function(a){return!(K.includes(a)&&(!ia||J.visibleStates[a]==="HIDDEN"))});o=l.filter(function(a){return!K.includes(a)});var M={};z.forEach(function(a){M[a]=J.visibleStates[a]});C=babelHelpers["extends"]({},J,{commentIDs:z,visibleStates:M});var ja=new Set(y.reduce(function(a,b){return a.concat(b.commentIDs)},[]).concat(ia?z:[]));q=K.filter(function(a){return!ja.has(a)});v==="forward"&&a.args.hasNext===!0&&a.args.afterCount===0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",e).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that has_next_page but after_count is 0");a.args.direction==="forward"&&a.args.hasNext===!1&&a.args.afterCount>0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",e).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that does NOT have next_page but after_count is > 0");a.args.direction==="backward"&&a.args.hasPrevious===!0&&a.args.beforeCount===0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",e).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that has_previous_page but before_count is 0");a.args.direction==="backward"&&a.args.hasPrevious===!1&&a.args.beforeCount>0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",e).warn("CometUFICommentListState.receiveCommentsPage: Received page of comments that does NOT have previous_page but before_count is > 0");d=c.shouldComposerRenderWhenListIsExpanded===!0||L===!0||k===!0;var N=babelHelpers["extends"]({},c.commentsHiddenByViewer);w.forEach(function(a){Object.prototype.hasOwnProperty.call(N,a)||(N[a]="COLLAPSED")});A=ja.size;if(f!==0&&a.args.direction==="forward"&&A===0){x=a.args;u=x.afterCount;l=x.hasNext;v={backward:null,forward:g({count:u,direction:"forward",error:null,hasMore:l,isLoading:!1,pageSize:m})};var O=c.expanded||k?"VISIBLE":"HIDDEN";e={__type:"COMMENTS_PAGE",afterCount:u,beforeCount:z.length,commentIDs:q,hasNext:l,hasPrevious:!1,state:O};z.forEach(function(a){M[a]=O});C=babelHelpers["extends"]({},J,{commentIDs:z,visibleStates:M});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");if(c.__type!=="DEPTH_1")throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");w=a.args.minCountToShowCollapser;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[e],commentsHiddenByViewer:N,expanded:O==="VISIBLE",locallyComposedCommentIDs:o,newCommentsPage:C,pagers:v,repliesCollapser:h({count:q.length,expanded:k,minCountToShowCollapser:w}),repliesExpander:k?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:d})}A=y[0];x=y[y.length-1];u=t.getVisibleCommentsCount({depth:f,state:c});if(a.args.direction==="backward"){if(L&&A!=null&&A.state!=="VISIBLE")throw b("unrecoverableViolation")("Expected first available page to be visible if backward pager was loading when backward comments were received","ufi2");l=a.args;e=l.beforeCount;v=l.hasPrevious;w=e<=z.length;w&&(M={},C.commentIDs.forEach(function(a){M[a]=L?"VISIBLE":"HIDDEN"}),C=babelHelpers["extends"]({},C,{visibleStates:M}));f=e-C.commentIDs.length-o.length;l=babelHelpers["extends"]({},B,{backward:L?g({count:f,direction:"backward",error:null,hasMore:v&&!w,isLoading:!1,pageSize:m}):B.backward});A={__type:"COMMENTS_PAGE",afterCount:((z=A==null?void 0:A.afterCount)!=null?z:0)+((z=A==null?void 0:(f=A.commentIDs)==null?void 0:f.length)!=null?z:0),beforeCount:e,commentIDs:q,hasNext:!0,hasPrevious:v,state:L||k?"VISIBLE":"HIDDEN"};if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[A].concat(y),commentsHiddenByViewer:N,locallyComposedCommentIDs:o,newCommentsPage:C,pagers:l,shouldComposerRenderWhenListIsExpanded:d});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");f=a.args.minCountToShowCollapser;z=k?!0:c.expanded;e=u+(A.state==="VISIBLE"?q.length:0)+(w&&L?C.commentIDs.length:0);return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[A].concat(y),commentsHiddenByViewer:N,expanded:z,locallyComposedCommentIDs:o,newCommentsPage:C,pagers:l,repliesCollapser:h({count:e,expanded:z,minCountToShowCollapser:f}),repliesExpander:k?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:d})}if(L&&x!=null&&x.state!=="VISIBLE")throw b("unrecoverableViolation")("Expected last available page to be visible if forward pager was loading when forward comments were received","ufi2");v=a.args;w=v.afterCount;A=v.hasNext;l=babelHelpers["extends"]({},B,{forward:L?g({count:w,direction:"forward",error:null,hasMore:A,isLoading:!1,pageSize:m}):B.forward});v={__type:"COMMENTS_PAGE",afterCount:w,beforeCount:((e=x==null?void 0:x.beforeCount)!=null?e:0)+((f=x==null?void 0:(z=x.commentIDs)==null?void 0:z.length)!=null?f:0),commentIDs:q,hasNext:A,hasPrevious:!0,state:L||k?"VISIBLE":"HIDDEN"};var P=0;m=k?y.map(function(a){a.state==="HIDDEN"&&(P+=a.commentIDs.length);return babelHelpers["extends"]({},a,{state:"VISIBLE"})}):y;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[].concat(m,[v]),commentsHiddenByViewer:N,locallyComposedCommentIDs:o,newCommentsPage:C,pagers:l,shouldComposerRenderWhenListIsExpanded:d});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");B=a.args.minCountToShowCollapser;w=v.state==="VISIBLE"?u+P+q.length:u+P;e=k?!0:c.expanded;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[].concat(m,[v]),commentsHiddenByViewer:N,expanded:e,locallyComposedCommentIDs:o,newCommentsPage:C,pagers:l,repliesCollapser:h({count:w,expanded:e,minCountToShowCollapser:B}),repliesExpander:k?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:d});case"RECEIVE_NEW_COMMENT":x=a.args;var Q=x.commentID;z=x.depth;f=x.pageSize;A=x.prevTotalCount;y=x.totalCount;q=c.commentPages;u=c.commentsByID;m=c.expanded;v=c.locallyComposedCommentIDs;var R=c.newCommentsPage;o=c.pagers;C=c.viewOption;l=t.getCommentsCount({depth:z,state:c})===0;w=Object.prototype.hasOwnProperty.call(R.visibleStates,Q)||q.some(function(a){return a.commentIDs.includes(Q)});if(w)return c;e=u[Q]!=null&&u[Q].is_locally_composed===!0;var S=!b("UFI2ViewOption").isChronologicalOrder(C)&&c.__type!=="DEPTH_0";B=c.repliesExpander!=null?babelHelpers["extends"]({},c.repliesExpander,{count:Math.min(c.repliesExpander.count+1,y)}):null;if(q.length===0){d=babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(k={},k[Q]=m||e||z!==0&&l&&A===0?"VISIBLE":"HIDDEN",k))});x=e?[Q].concat(v):v;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",locallyComposedCommentIDs:x,newCommentsPage:d});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");w=a.args.minCountToShowCollapser;u=l&&A===0?!0:m;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:u,locallyComposedCommentIDs:x,newCommentsPage:d,repliesCollapser:h({count:d.commentIDs.length,expanded:m,minCountToShowCollapser:w}),repliesExpander:B,shouldComposerRenderWhenListIsExpanded:!0})}C=q[0];k=p(c);l=z===0&&t.hasMoreInDirection({depth:z,direction:"forward",state:c,totalCount:y})&&!c.commentPages.some(function(a){return a.state==="VISIBLE"});if(!l&&e){var T=!1,U=babelHelpers["extends"]({},R.visibleStates),ka=[],V=[];u=(S?[].concat(q).reverse():q).map(function(a){if(!T&&a.state==="VISIBLE"){T=!0;R.commentIDs.forEach(function(a){U[a]==="VISIBLE"&&!s(c)?(delete U[a],V.push(a)):ka.push(a)});return babelHelpers["extends"]({},a,{commentIDs:S?[].concat(a.commentIDs,V.reverse(),[Q]):[Q].concat(V,a.commentIDs)})}return T?babelHelpers["extends"]({},a,{afterCount:S?a.afterCount+1+V.length:a.afterCount,beforeCount:S?a.beforeCount:a.beforeCount+1+V.length}):a});x=babelHelpers["extends"]({},R,{commentIDs:ka,visibleStates:U});d=[Q].concat(v);if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:u,locallyComposedCommentIDs:d,newCommentsPage:x});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");w=a.args.minCountToShowCollapser;var W=t.getVisibleCommentsCount({depth:z,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:S?u.reverse():u,locallyComposedCommentIDs:d,newCommentsPage:x,repliesCollapser:h({count:W+1,expanded:m,minCountToShowCollapser:w}),repliesExpander:B,shouldComposerRenderWhenListIsExpanded:!0})}else if(l){d={commentPages:q.map(function(a,b){return b===0?babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0}):a}),locallyComposedCommentIDs:e?[Q].concat(v):v,newCommentsPage:babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(u={},u[Q]="VISIBLE",u))})};return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,d,{__type:"DEPTH_0"}):babelHelpers["extends"]({},c,d,{__type:"DEPTH_1"})}else if(k&&aa(c)){x=q.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})});w=babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(W={},W[Q]="VISIBLE",W))});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:x,newCommentsPage:w});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");l=a.args.minCountToShowCollapser;e=t.getVisibleCommentsCount({depth:z,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:x,newCommentsPage:w,repliesCollapser:h({count:e+1,expanded:m,minCountToShowCollapser:l}),repliesExpander:B,shouldComposerRenderWhenListIsExpanded:!0})}else if(k&&R.commentIDs.length===0){v=o.backward!=null?babelHelpers["extends"]({},o,{backward:babelHelpers["extends"]({},o.backward,{count:Math.min(o.backward.count+1,f)})}):o;u=C.commentIDs.length<f;if(u){d=[babelHelpers["extends"]({},C,{commentIDs:[Q].concat(C.commentIDs)})].concat(q.slice(1).map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})}));return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:d,pagers:v}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:d,pagers:v,repliesExpander:B})}W=[{__type:"COMMENTS_PAGE",afterCount:C.afterCount+C.commentIDs.length,beforeCount:0,commentIDs:[Q],hasNext:!0,hasPrevious:!1,state:"HIDDEN"},babelHelpers["extends"]({},C,{beforeCount:1,hasPrevious:!0})].concat(q.slice(1).map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})}));return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:W,pagers:v}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:W,pagers:v,repliesExpander:B})}else{z=y<=A;x=z?q:q.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0})});w=o.backward!=null?babelHelpers["extends"]({},o,{backward:babelHelpers["extends"]({},o.backward,{count:z?o.backward.count:Math.min(o.backward.count+1,f)})}):o;m=babelHelpers["extends"]({},R,{commentIDs:[Q].concat(R.commentIDs),visibleStates:babelHelpers["extends"]({},R.visibleStates,(e={},e[Q]="HIDDEN",e))});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:x,newCommentsPage:m,pagers:w}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:x,newCommentsPage:m,pagers:w,repliesExpander:B})}case"RECEIVE_REALTIME_COMMENT":var X=a.args.commentID;l=Object.prototype.hasOwnProperty.call(c.newCommentsPage.visibleStates,X)||c.commentPages.some(function(a){return a.commentIDs.includes(X)});k=s(c);if(!b("UFI2ViewOption").isChronologicalOrder(c.viewOption)&&!k){b("recoverableViolation")("Unable to receive realtime comment for non chronological ordering mode "+((u=c.viewOption)!=null?u:"(null ordering mode)"),"ufi2");return c}if(l)return c;d=t.getCommentsCount({depth:a.args.depth,state:c})===0;C=r(c).length===0;W=!a.args.hideCommentInPager&&d&&c.__type==="DEPTH_1";v=C&&!c.expanded;y=a.args.hideCommentInPager||!c.expanded&&!W||!d&&!aa(c)||k&&!d&&!ca(c);A=!v&&y===!0&&!(C&&c.pagers.forward!=null)&&!k;q=!v&&y&&!A;var la=k;e={canViewerComment:c.canViewerComment,commentPages:c.commentPages.map(function(a){return la?babelHelpers["extends"]({},a,{afterCount:a.afterCount+1,hasNext:!0}):babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0})}),commentsByID:c.commentsByID,commentsHiddenByViewer:c.commentsHiddenByViewer,expanded:c.expanded||W,feedbackTargetID:c.feedbackTargetID,hasPaged:c.hasPaged,locallyComposedCommentIDs:c.locallyComposedCommentIDs,newCommentsPage:babelHelpers["extends"]({},c.newCommentsPage,{commentIDs:la?[].concat(c.newCommentsPage.commentIDs,[X]):[X].concat(c.newCommentsPage.commentIDs),visibleStates:babelHelpers["extends"]({},c.newCommentsPage.visibleStates,(z={},z[X]=y?"HIDDEN":"VISIBLE",z))}),pagers:y?{backward:A?{__type:"PAGER",count:((e=(f=c.pagers)==null?void 0:(o=f.backward)==null?void 0:o.count)!=null?e:0)+1,direction:"backward",status:{error:(w=(x=c.pagers)==null?void 0:(m=x.backward)==null?void 0:m.status.error)!=null?w:null,pending:(l=(B=c.pagers)==null?void 0:(u=B.backward)==null?void 0:u.status.pending)!=null?l:!1}}:c.pagers.backward,forward:q?{__type:"PAGER",count:((v=(d=c.pagers)==null?void 0:(C=d.forward)==null?void 0:C.count)!=null?v:0)+1,direction:"forward",status:{error:(z=(k=c.pagers)==null?void 0:(W=k.forward)==null?void 0:W.status.error)!=null?z:null,pending:(o=(A=c.pagers)==null?void 0:(f=A.forward)==null?void 0:f.status.pending)!=null?o:!1}}:c.pagers.forward}:c.pagers,shouldComposerRenderWhenListIsExpanded:c.shouldComposerRenderWhenListIsExpanded,topLevelFeedbackTargetID:c.topLevelFeedbackTargetID,viewOption:c.viewOption};if(c.__type==="DEPTH_1"){return babelHelpers["extends"]({},c,e,{repliesCollapser:h({count:t.getVisibleCommentsCount({depth:a.args.depth,state:c})+(y?0:1),expanded:c.expanded,minCountToShowCollapser:b("CometUFICommentListStateConfig").MIN_REPLIES_TO_SHOW_COLLAPSER}),repliesExpander:i({error:(w=(x=c.repliesExpander)==null?void 0:(m=x.status)==null?void 0:m.error)!=null?w:null,expanded:c.expanded,isLoading:(l=(B=c.repliesExpander)==null?void 0:(u=B.status)==null?void 0:u.pending)!=null?l:!1,totalCount:a.args.totalCount})})}return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,e):c;case"RECEIVE_REFETCH_LIST":q=a.args.depth;d=c.feedbackTargetID;C=c.topLevelFeedbackTargetID;v=c.viewOption;if(q!==0)throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");if(!t.isListLoading({depth:q,state:c}))throw b("unrecoverableViolation")("Expected list to be loading","ufi2");k=n.getInitialState({args:babelHelpers["extends"]({},a.args,{depth:0,feedbackTargetID:d,initiallyExpanded:!0,topLevelFeedbackTargetID:C,viewOption:v}),state:null});if(k.__type!=="DEPTH_0")throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");return babelHelpers["extends"]({},k,{__type:"DEPTH_0",expanded:c.expanded,status:{error:null,pending:!1}});case"REQUEST_COMMENTS_PAGE":W=a.args;z=W.depth;A=W.direction;f=W.pageSize;o=c.commentPages;y=c.expanded;x=c.newCommentsPage;m=c.pagers;if(!y)throw b("unrecoverableViolation")("Expected list to be expanded","ufi2");if(t.isPagerLoading({depth:z,direction:A,state:c}))throw b("unrecoverableViolation")("Cant request page if pager is loading","ufi2");if(z===0&&t.isListLoading({depth:z,state:c}))throw b("unrecoverableViolation")("Cant request page if list is loading","ufi2");if(z!==0&&t.isRepliesExpanderLoading({depth:z,state:c}))throw b("unrecoverableViolation")("Cant request page if replies expander is loading","ufi2");if(A==="backward"){w=o.findIndex(function(a){return a.state==="VISIBLE"});B=-1;if(w>-1){u=o[w];u.hasPrevious===!1&&b("FBLogger")("ufi2").mustfix("CometUFICommentList.updater(...): REQUEST_COMMENTS_PAGE - Can't request previous comments if there are no more comments available, feedbackID: %s",c.topLevelFeedbackTargetID);if(u.hasPrevious!==!0)throw b("unrecoverableViolation")("Can't request previous comments if there are no more comments available","ufi2");B=w-1}else w===-1&&o.length>0&&(B=0);l=o[B];e=p(c)&&da(c,"HIDDEN");if(l&&l.state==="HIDDEN"){q=[].concat(o);q[B]=babelHelpers["extends"]({},l,{state:"VISIBLE"});d=babelHelpers["extends"]({},m,{backward:g({count:l.beforeCount,direction:"backward",error:null,hasMore:l.hasPrevious,isLoading:!1,pageSize:f})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:q,hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:d,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");C=a.args.minCountToShowCollapser;v=t.getVisibleCommentsCount({depth:z,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:q,hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:d,repliesCollapser:h({count:v+l.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:C}),shouldComposerRenderWhenListIsExpanded:!0})}else if(e){var ma={};x.commentIDs.forEach(function(a){ma[a]="VISIBLE"});k=babelHelpers["extends"]({},x,{visibleStates:ma});W=babelHelpers["extends"]({},m,{backward:null});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),newCommentsPage:k,pagers:W,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");y=a.args.minCountToShowCollapser;A=t.getVisibleCommentsCount({depth:z,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),newCommentsPage:k,pagers:W,repliesCollapser:h({count:A+k.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:y}),shouldComposerRenderWhenListIsExpanded:!0})}else{u=babelHelpers["extends"]({},m,{backward:babelHelpers["extends"]({},m.backward,{status:{error:null,pending:!0}})});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:u}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:u})}}w=[].concat(o).reverse().findIndex(function(a){return a.state==="VISIBLE"});B=-1;if(w>-1){q=o.length-1-w;d=o[q];if(d.hasNext!==!0)throw b("unrecoverableViolation")("Can't request previous comments if there are no more comments available","ufi2");B=q+1}else w===-1&&o.length>0&&(B=o.length-1);v=o[B];if(v&&v.state==="HIDDEN"){l=[].concat(o);l[B]=babelHelpers["extends"]({},v,{state:"VISIBLE"});C=babelHelpers["extends"]({},m,{forward:g({count:v.afterCount,direction:"forward",error:null,hasMore:v.hasNext,isLoading:!1,pageSize:f})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:l,hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:C,shouldComposerRenderWhenListIsExpanded:!0});if(a.args.depth===0)throw b("unrecoverableViolation")("CometUFICommentList.updater(...): depth should be 1 or greater","ufi2");e=a.args.minCountToShowCollapser;W=t.getVisibleCommentsCount({depth:z,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:l,hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:C,repliesCollapser:h({count:W+v.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:e}),shouldComposerRenderWhenListIsExpanded:!0})}else if(s(c)&&ba(c)&&da(c,"HIDDEN")&&c.__type==="DEPTH_0"){var na={};x.commentIDs.forEach(function(a){na[a]="VISIBLE"});return babelHelpers["extends"]({},c,{hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),newCommentsPage:babelHelpers["extends"]({},x,{visibleStates:na}),pagers:babelHelpers["extends"]({},m,{forward:null}),shouldComposerRenderWhenListIsExpanded:!0})}else{A=babelHelpers["extends"]({},m,{forward:babelHelpers["extends"]({},m.forward,{status:{error:null,pending:!0}})});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:A}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:A})}case"REQUEST_REFETCH_LIST":k=a.args.depth;if(k!==0||c.__type!=="DEPTH_0")throw b("unrecoverableViolation")("Expected depth to be 0 for RECEIVE_REFETCH_LIST","ufi2");if(t.isListLoading({depth:k,state:c}))throw b("unrecoverableViolation")("Expected list to be loading","ufi2");return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[],expanded:!0,hasPaged:{backward:!1,forward:!1},locallyComposedCommentIDs:[],newCommentsPage:{__type:"NEW_COMMENTS_PAGE",commentIDs:[],visibleStates:{}},pagers:{backward:null,forward:null},status:{error:null,pending:!0}});case"SET_CAN_VIEWER_COMMENT":y=a.args.canViewerComment;return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",canViewerComment:y}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",canViewerComment:y});case"SET_COMMENTS_BY_ID":u=a.args.commentsByID;return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsByID:u}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsByID:u});case"SET_SERVER_COMMENT_ID":d=a.args;var Y=d.clientCommentID,Z=d.serverCommentID;q=c.commentPages;w=c.locallyComposedCommentIDs;o=c.newCommentsPage;B=o.commentIDs.indexOf(Y);f=B!==-1;z=q.some(function(a){return a.commentIDs.some(function(a){return a===Y})});if(!f&&!z)return c;l=o.commentIDs.some(function(a){return a===Z});C=q.filter(function(a){return a.state==="HIDDEN"}).some(function(a){return a.commentIDs.some(function(a){return a===Z})});W=q.filter(function(a){return a.state==="VISIBLE"}).some(function(a){return a.commentIDs.some(function(a){return a===Z})});v=c;if(C){e=q.map(function(a){var b=a.commentIDs.indexOf(Z);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),a.commentIDs.slice(b+1))})});v.__type==="DEPTH_0"?v=babelHelpers["extends"]({},v,{__type:"DEPTH_0",commentPages:e}):v=babelHelpers["extends"]({},v,{__type:"DEPTH_1",commentPages:e})}if(l){x=w.filter(function(a){return a===Y});m=o.commentIDs.filter(function(a){return a!==Y});A=babelHelpers["extends"]({},o.visibleStates);delete A[Y];k=babelHelpers["extends"]({},o,{commentIDs:m,visibleStates:A});v.__type==="DEPTH_0"?v=babelHelpers["extends"]({},v,{__type:"DEPTH_0",locallyComposedCommentIDs:x,newCommentsPage:k}):v=babelHelpers["extends"]({},v,{__type:"DEPTH_1",locallyComposedCommentIDs:x,newCommentsPage:k})}if(f){y=babelHelpers["extends"]({},o.visibleStates);if(W||l){u=o.commentIDs.filter(function(a){return a!==Y});delete y[Y];d=babelHelpers["extends"]({},o,{commentIDs:u,visibleStates:y});v.__type==="DEPTH_0"?v=babelHelpers["extends"]({},v,{__type:"DEPTH_0",newCommentsPage:d}):v=babelHelpers["extends"]({},v,{__type:"DEPTH_1",newCommentsPage:d})}else{B=o.commentIDs.map(function(a){return a===Y?Z:a});y[Z]=y[Y];delete y[Y];C=babelHelpers["extends"]({},o,{commentIDs:B,visibleStates:y});v.__type==="DEPTH_0"?v=babelHelpers["extends"]({},v,{__type:"DEPTH_0",newCommentsPage:C}):v=babelHelpers["extends"]({},v,{__type:"DEPTH_1",newCommentsPage:C})}}if(z)if(W||l){e=q.map(function(a){var b=a.commentIDs.indexOf(Y);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),a.commentIDs.slice(b+1))})});v.__type==="DEPTH_0"?v=babelHelpers["extends"]({},v,{__type:"DEPTH_0",commentPages:e}):v=babelHelpers["extends"]({},v,{__type:"DEPTH_1",commentPages:e})}else{m=q.map(function(a){var b=a.commentIDs.indexOf(Y);if(b===-1)return a;else return babelHelpers["extends"]({},a,{commentIDs:[].concat(a.commentIDs.slice(0,b),[Z],a.commentIDs.slice(b+1))})});v.__type==="DEPTH_0"?v=babelHelpers["extends"]({},v,{__type:"DEPTH_0",commentPages:m}):v=babelHelpers["extends"]({},v,{__type:"DEPTH_1",commentPages:m})}A=w.map(function(a){return a===Y?Z:a});return v.__type==="DEPTH_0"?babelHelpers["extends"]({},v,{__type:"DEPTH_0",locallyComposedCommentIDs:A}):babelHelpers["extends"]({},v,{__type:"DEPTH_1",locallyComposedCommentIDs:A});case"UNHIDE_COMMENTS":x=a.args.commentIDs;k=c.commentsHiddenByViewer;var $=babelHelpers["extends"]({},k);x.forEach(function(a){delete $[a]});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:$}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:$});case"INITIAL_STATE":default:a.__type;throw b("unrecoverableViolation")("CometUFICommentListState: Invalid action type: "+a.__type,"ufi2")}}function m(a,c){try{var d=k(a,c);return d}catch(f){d=b("ErrorNormalizeUtils").normalizeError(f);d=d.message;var e=a.__type==="REQUEST_COMMENTS_PAGE"||a.__type==="RECEIVE_COMMENTS_PAGE"?a.args.direction:"Unknown";b("FBLogger")("ufi2").catching(f).addMetadata("UFI","COMMENTS_LIST_ACTION",a.__type).addMetadata("UFI","COMMENTS_LIST_DEPTH",""+a.args.depth).addMetadata("UFI","COMMENTS_LIST_DIRECTION",e).mustfix("CometUFICommentListState.updater(...): "+d);b("gkx")("676930")&&window.__enableUFI2CommentsListLogging===!0&&a.__type!=="SET_COMMENTS_BY_ID"&&console.groupEnd();if(!c)throw f;return c}}function a(a,b){return k(a,b)}function c(a,b){return k(a,b)}var n={collapseList:function(a){var b=a.args;a=a.state;return m({__type:"COLLAPSE_LIST",args:b},a)},deleteComment:function(a){var b=a.args;a=a.state;return m({__type:"DELETE_COMMENT",args:b},a)},expandHiddenComments:function(a){var b=a.args;a=a.state;return m({__type:"EXPAND_HIDDEN_COMMENTS",args:b},a)},expandList:function(a){var b=a.args;a=a.state;return m({__type:"EXPAND_LIST",args:b},a)},failCommentPagination:function(a){var b=a.args;a=a.state;return m({__type:"FAIL_COMMENT_PAGINATION",args:b},a)},getInitialState:function(a){var b=a.args;a=a.state;return m({__type:"INITIAL_STATE",args:b},a)},hideComments:function(a){var b=a.args;a=a.state;return m({__type:"HIDE_COMMENTS",args:b},a)},receiveCommentsPage:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_COMMENTS_PAGE",args:b},a)},receiveNewComment:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_NEW_COMMENT",args:b},a)},receiveRealtimeComment:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_REALTIME_COMMENT",args:b},a)},receiveRefetchList:function(a){var b=a.args;a=a.state;return m({__type:"RECEIVE_REFETCH_LIST",args:b},a)},requestCommentsPage:function(a){var b=a.args;a=a.state;return m({__type:"REQUEST_COMMENTS_PAGE",args:b},a)},requestRefetchList:function(a){var b=a.args;a=a.state;return m({__type:"REQUEST_REFETCH_LIST",args:b},a)},setCanViewerComment:function(a){var b=a.args;a=a.state;return m({__type:"SET_CAN_VIEWER_COMMENT",args:b},a)},setCommentsByID:function(a){var b=a.args;a=a.state;return m({__type:"SET_COMMENTS_BY_ID",args:b},a)},setServerCommentID:function(a){var b=a.args;a=a.state;return m({__type:"SET_SERVER_COMMENT_ID",args:b},a)},unhideComments:function(a){var b=a.args;a=a.state;return m({__type:"UNHIDE_COMMENTS",args:b},a)}};function o(a){var b=a.direction;a=a.state;b=b==="forward"?[].concat(a.commentPages).reverse():a.commentPages;return b.find(function(a){return a.state==="VISIBLE"})}function p(a){var b=a.commentPages,c=a.newCommentsPage;b=b[0];if(!b)return c.commentIDs.length>0;return s(a)?b.beforeCount===0:b.beforeCount-c.commentIDs.length===0}function aa(a){var b=a.commentPages[0];b=(b==null||b.state==="VISIBLE")&&p(a);return b&&(s(a)||q(a,"VISIBLE"))}function ba(a){var b=a.commentPages,c=a.newCommentsPage;b=[].concat(b).reverse()[0];if(!b)return c.commentIDs.length>0;return s(a)?b.afterCount-c.commentIDs.length===0:b.afterCount===0}function ca(a){var b=a.commentPages;b=[].concat(b).reverse()[0];b=(b==null||b.state==="VISIBLE")&&ba(a);return b&&(!s(a)||q(a,"VISIBLE"))}function da(a,b){var c=a.newCommentsPage;return c.commentIDs.some(function(a){return c.visibleStates[a]===b})}function q(a,b){var c=a.newCommentsPage;return c.commentIDs.every(function(a){return c.visibleStates[a]===b})}function r(a){var c=a.__type,d=a.commentPages,e=a.newCommentsPage,f=a.viewOption;d=d.filter(function(a){return a.state==="VISIBLE"}).reduce(function(a,b){return a.concat(b.commentIDs)},[]);var g=e.commentIDs.filter(function(a){return e.visibleStates[a]==="VISIBLE"});if(s(a))return[].concat(d,g);return c==="DEPTH_1"&&!b("UFI2ViewOption").isChronologicalOrder(f)?[].concat(d,g.reverse()):[].concat(g,d)}function s(a){return a.__type==="DEPTH_0"&&a.viewOption==="MOST_VOTED"&&b("gkx")("1445059")}var t={canFetchInDirection:function(a){var b=a.depth,c=a.direction,d=a.state;a=a.totalCount;if(a===0)return!1;a=d.commentPages;var e=d.newCommentsPage,f=t.isPagerLoading({depth:b,direction:c,state:d});if(f)return!1;f=b===0&&t.isListLoading({depth:b,state:d});if(f)return!1;f=b!==0&&t.isRepliesExpanderLoading({depth:b,state:d});if(f)return!1;if(a.length===0&&c==="forward")return!0;else if(a.length===0&&c==="backward")return!1;f=a[0];a=a[a.length-1];b=t.getPagerCount({depth:b,direction:"backward",state:d});b=b===e.commentIDs.length&&q(d,"HIDDEN");return c==="backward"?f.state!=="HIDDEN"&&!b&&f.hasPrevious:a.state!=="HIDDEN"&&a.hasNext},getCommentsCount:function(a){a.depth;a=a.state;var b=a.commentPages;a=a.newCommentsPage;return a.commentIDs.concat(b.reduce(function(a,b){return a.concat(b.commentIDs)},[])).length},getCountForFetch:function(a){var c=a.depth,d=a.direction,e=a.pageSize;a=a.state;d=t.getPagerCount({depth:c,direction:d,state:a});if(d!=null)return d;if(c!==0){if(e==null)throw b("unrecoverableViolation")("CometUFICommentListState.getCountForFetch(...): Expected pageSize to compute fetch count for expanding replies","ufi2");d=t.getRepliesExpanderCount({depth:c,state:a});if(d!=null)return Math.min(d,e)}return null},getHiddenStateForComment:function(a){var b=a.commentID;a.depth;a=a.state;a=a.commentsHiddenByViewer;return a[b]||null},getPagerCount:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return null;a=a[b];return a!=null?a.count:null},getPagerError:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return null;a=a[b];return a!=null?a.status.error:null},getRepliesCollapserCount:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesCollapser;return b!=null?b.count:null},getRepliesExpanderCount:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesExpander;return b!=null?b.count:null},getRepliesExpanderError:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesExpander;return b!=null?b.status.error:null},getVisibleComments:function(a){a.depth;a=a.state;var c=a.commentsByID,d=a.locallyComposedCommentIDs,e=a.newCommentsPage,f=a.viewOption;a=r(a);var g=a.map(function(a){var d=c[a];if(!d){b("FBLogger")("ufi2").warn("CometUFICommentListState.getVisibleComments: Could not find comment locally: %s",a);return null}return d}).filter(Boolean);a.length>0&&g.length===0&&b("FBLogger")("ufi2").warn("CometUFICommentListState.getVisibleComments: Could not find ANY of the %s comments locally",a.length);return!d.length&&e.commentIDs.length>0&&b("UFI2ViewOption").isChronologicalOrder(f)?g.sort(function(a,b){return((b=b.created_time)!=null?b:0)-((b=a.created_time)!=null?b:0)}):g},getVisibleCommentsCount:function(a){a.depth;a=a.state;return r(a).length},getVisibleCommentsGroupedByCollapsedState:function(a){var b=a.depth,c=a.reverse,d=a.shouldCollapseComment;a=a.state;b=t.getVisibleComments({depth:b,state:a});a=c?b.slice().reverse():b;return a.reduce(function(a,b){var c=d(b)?"COLLAPSED":"VISIBLE";if(a.length===0)return[{comments:[b],state:c}];var e=a[a.length-1],f=e.comments[e.comments.length-1];if(!f)return a;f=e.state;if(f===c){e.comments.push(b);return a}return[].concat(a,[{comments:[b],state:c}])},[])},getVisibleCommentsWithHiddenCommentsCollapsed:function(a){var b=a.depth,c=a.reverse,d=a.state;return t.getVisibleCommentsGroupedByCollapsedState({depth:b,reverse:c,shouldCollapseComment:function(a){return t.getHiddenStateForComment({commentID:a.id,depth:b,state:d})==="COLLAPSED"},state:d})},hasLastPageLeftInDirection:function(a){a.depth;var b=a.direction,c=a.pageSize,d=a.state;a=a.totalCount;d=o({direction:b,state:d});if(!d)return b==="forward"?a<=c:!1;return b==="forward"?d.afterCount<=c:d.beforeCount<=c},hasMoreInDirection:function(a){a.depth;var b=a.direction,c=a.state;a=a.totalCount;c=o({direction:b,state:c});if(!c)return b==="forward"?a>0:!1;return b==="forward"?c.hasNext:c.hasPrevious},hasPagedInDirection:function(a){a.depth;var b=a.direction;a=a.state;a=a.hasPaged;return a[b]},hasVisibleComments:function(a){var b=a.depth;a=a.state;return t.getVisibleComments({depth:b,state:a}).length>0},isComposerVisible:function(a){a.depth;a=a.state;return a.canViewerComment&&a.expanded&&a.shouldComposerRenderWhenListIsExpanded},isListExpanded:function(a){a.depth;a=a.state;return a.expanded},isListLoading:function(a){var b=a.depth;a=a.state;return b!==0||a.__type!=="DEPTH_0"?!1:a.status.pending},isPagerLoading:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return!1;a=a[b];return a!=null?a.status.pending:!1},isPagerVisible:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return!1;a=a[b];return a!=null},isRepliesCollapserVisible:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesCollapser;return b!=null},isRepliesExpanderLoading:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesExpander;return b!=null?b.status.pending:!1},isRepliesExpanderVisible:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesExpander;return b!=null},pagerHasRealtimeComments:function(a){var b=a.direction;a=a.state;var c=Object.values(a.newCommentsPage.visibleStates).find(function(a){return a==="HIDDEN"})!=null;return b==="forward"?a.pagers.backward==null?c:!1:c}};e.exports={_updaterDepth0_DO_NOT_USE:a,_updaterDepth1_DO_NOT_USE:c,Selectors:t,StateUpdaters:n}}),null);
__d("CometUFICommentsProviderState",["FBLogger","gkx","isUFI2ClientID"],(function(a,b,c,d,e,f){"use strict";function g(a){return a!=null&&(a.is_locally_composed===!0||a.is_created_from_subscription===!0||a.optimistic_error!=null||a.optimistic_action!=null)}function h(a){return!a||a.spam_display_mode==null?!1:(a==null?void 0:a.spam_display_mode)!=="none"}function a(a){a=(a=a.feedback.display_comments)==null?void 0:a.before_count;return typeof a==="number"?a:null}function i(a){return a.filter(function(a){return b("isUFI2ClientID")(a)})}function j(a){var c={};a=a?a.map(function(a){if(!a){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received null edge from comments connection.");return null}a=a.node;if(!a){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received null comment from comments connection.");return null}if(a.id!=null){var d=a.id;c[d]=a;return d}else{b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received comment with null id from comments connection.");return null}}).filter(Boolean):[];if(a.length>Object.keys(c).length){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getCommentsFromEdges(...): Received duplicate comments from comments connection");var d=new Set();return{commentIDs:a.filter(function(a){if(d.has(a))return!1;d.add(a);return!0}),commentsByID:c}}return{commentIDs:a,commentsByID:c}}function k(a,c){var d=Object.keys(a),e=Object.keys(c),f=d.length,g=e.length;if(g>=f)return[];e.every(function(b){return Object.prototype.hasOwnProperty.call(a,b)})||b("FBLogger")("ufi2").warn("CometUFICommentsProvider: Expected next comments to be a subset of previous comments when removing a comment");g=d.filter(function(a){return!Object.prototype.hasOwnProperty.call(c,a)});return g}function l(a,c,d,e){var f=[];d=a.filter(function(a){return!b("isUFI2ClientID")(a)});var g=function(){if(i){if(j>=h.length)return"break";a=h[j++]}else{j=h.next();if(j.done)return"break";a=j.value}var b=a,d=e[b],g=d&&d.client_id!=null?d.client_id:null;g!=null&&c.find(function(a){return a===g})&&f.push({clientID:g,serverID:b})};for(var h=d,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){d=g();if(d==="break")break}return f}function m(a,c,d){if(d.length<=c.length)return[];var e=a[d[0]];if(!e){b("FBLogger")("ufi2").warn("CometUFICommentsProviderState.getNewlyCreatedCommentIDs(...): Next most recent comment not found");return[]}e=c.filter(function(b){return g(a[b])});c=d.filter(function(b){return g(a[b])});d=c.length-e.length>0;if(!d)return[];if(e.length===0)return c;var f=new Set(e);return c.filter(function(a){return!f.has(a)})}function n(a,b){return b.filter(function(b){b=a[b];return b!=null&&h(b)})}function o(a,b,c){return c.filter(function(c){var d=a[c];c=b[c];return d!=null&&h(d)===!1&&h(c)===!0})}function p(a,b,c){return c.filter(function(c){var d=a[c];c=b[c];return d!=null&&h(d)===!0&&h(c)===!1})}function c(a,c){var d=a.depth,e=c.commentsByID,f=c.commentIDs;a=j(a.edges);var g=a.commentIDs;a=a.commentsByID;var h=f.length,q=c.clientCommentIDs,r=g.length,s=i(g),t=c.selectedViewOption;c=c.isRefetchingConnection;var u=n(a,g),v=o(e,a,g),w=p(e,a,g);q=l(g,q,s,a);var x=r>h;h=h>r;r=x?m(a,f,g):[];x=h&&!c;f=x?k(e,a):[];h={clientCommentIDs:s,commentIDs:g,commentIDsUpdatedToServerIDs:q,commentsByID:a,hiddenCommentIDs:u,isRefetchingConnection:c,newlyCreatedCommentIDs:r,newlyHiddenCommentIDs:v,newlyUnhiddenCommentIDs:w,removedCommentIDs:f,selectedViewOption:t};b("gkx")("676930")&&window.__enableUFI2CommentsListLogging===!0&&(console.groupCollapsed("%cUFI2 Relay Comments Connection Update at depth "+d+":",";background-color:#75DBCD;color:#1F2D3D;opacity:0.7;font-weight:bold;"),console.groupEnd());return h}function d(a){a=a.edges;a=j(a);var b=a.commentIDs;a=a.commentsByID;var c=i(b),d=n(a,b);return{clientCommentIDs:c,commentIDs:b,commentIDsUpdatedToServerIDs:[],commentsByID:a,hiddenCommentIDs:d,isRefetchingConnection:!1,newlyCreatedCommentIDs:[],newlyHiddenCommentIDs:[],newlyUnhiddenCommentIDs:[],removedCommentIDs:[],selectedViewOption:null}}e.exports={getBeforeCount:a,getClientCommentIDs:i,getCommentIDsUpdatedToServerIDs:l,getCommentsFromEdges:j,getDerivedStateFromProps:c,getHiddenCommentIDs:n,getInitialState:d,getNewlyCreatedCommentIDs:m,getNewlyHiddenCommentIDs:o,getNewlyUnhiddenCommentIDs:p,getRemovedCommentIDs:k}}),null);
__d("CometUFITopReactions.react",["fbt","CometFeedARIAProperties.react","CometPressable.react","CometReactionIcon.react","CometRelay","CometTrackingNodeProvider.react","CometUFIReactionsDialog.entrypoint","CometUFITooltip.react","JSResource","React","emptyFunction","recoverableViolation","stylex","unrecoverableViolation","useCometEntryPointDialog","useCometInteractionTracing","CometUFITopReactions_feedback.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b("CometRelay").graphql;var j=b("CometRelay").useFragment,k=b("React");c=b("React");var l=c.useCallback,m=c.useContext,n=b("JSResource")("CometUFIReactionIconTooltipContent.react").__setRef("CometUFITopReactions.react"),o={firstReaction:{zIndex:"kavbgo14"},icon:{verticalAlign:"j1lvzwm4"},noBorder:{borderTopWidth:"rt8b4zig",borderEndWidth:"n8ej3o3l",borderBottomWidth:"agehan2d",borderStartWidth:"sk4xxmp2"},reaction:{borderTopStartRadius:"t0qjyqq4",borderTopEndRadius:"jos75b7i",borderBottomEndRadius:"j6sty90h",borderBottomStartRadius:"kv0toi1t",display:"q9uorilb",height:"hm271qws",width:"ov9facns"},reactionContainer:{borderTopColor:"np69z8it",borderEndColor:"et4y5ytx",borderBottomColor:"j7g94pet",borderStartColor:"b74d5cxt",borderTopStartRadius:"qw6c0r16",borderTopEndRadius:"kb8x4rkr",borderBottomEndRadius:"ed597pkb",borderBottomStartRadius:"omcyoz59",borderTopStyle:"goun2846",borderEndStyle:"ccm00jje",borderBottomStyle:"s44p3ltw",borderStartStyle:"mk2mc5f4",borderTopWidth:"qxh1up0x",borderEndWidth:"qtyiw8t4",borderBottomWidth:"tpcyxxvw",borderStartWidth:"k0bpgpbk",height:"hm271qws",marginStart:"rl04r1d5",position:"l9j0dhe7",width:"ov9facns"},root:{alignItems:"bp9cbjyn",display:"j83agx80",paddingStart:"b3onmgus"},secondReaction:{zIndex:"tkr6xdv7"},thirdReaction:{zIndex:"du4w35lb"}};function p(a){var c=a.feedbackTargetID,d=a.i18nReactionCount,e=a.localizedName,f=a.noBorder,h=a.reactionType,j=a.shouldNotOpenTopReactorsDialogOnClick;a=a.xstyle;e=e;if(c==null)throw b("unrecoverableViolation")("CometUFITopReactions: Expected feedback.id","ufi2");var m=b("useCometEntryPointDialog")(b("CometUFIReactionsDialog.entrypoint"),{feedbackTargetID:c,reactionType:h}),p=m[0];m=m[1];var q=b("useCometInteractionTracing")(30605374,"fluid","INTERACTION"),r=l(function(){q(function(){p({})})},[p,q]);return k.jsx("span",{className:(i||(i=b("stylex")))(o.reactionContainer,f===!0&&o.noBorder,a),children:k.jsx("span",{className:i(o.reaction),children:k.jsx(b("CometUFITooltip.react"),{headline:(f=e)!=null?f:void 0,tooltipContentComponent:n,tooltipContentProps:{queryVariables:{feedbackTargetID:c,reactionType:h},reactionType:h},children:k.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:137,children:k.jsx(b("CometPressable.react"),{display:"inline",label:g._("{i18nReactionCount} {i18nReactionName}{space}",[g._param("i18nReactionCount",d),g._param("i18nReactionName",e),g._param("space"," ")]),onPress:j?b("emptyFunction"):r,overlayDisabled:!0,ref:m,children:k.jsx(b("CometReactionIcon.react"),{reactionType:h,size:18,xstyle:o.icon})})})})})})}function a(a){var c=a.noBorder,d=a.shouldNotOpenTopReactorsDialogOnClick,e=d===void 0?!1:d;d=babelHelpers.objectWithoutPropertiesLoose(a,["noBorder","shouldNotOpenTopReactorsDialogOnClick"]);var f=j(h!==void 0?h:h=b("CometUFITopReactions_feedback.graphql"),d.feedback);a=f.top_reactions;d=a==null?void 0:a.edges;a=m(b("CometFeedARIAProperties.react"));if(!d)throw b("unrecoverableViolation")("CometUFITopReactions: Expected top reactions","ufi2");if(d.length===0)return null;d=d.filter(function(a){return((a=a.node)==null?void 0:a.reaction_type)!=null}).slice(0,3);return k.jsx("span",{"aria-label":g._("See who reacted to this"),role:"toolbar",children:k.jsx("span",babelHelpers["extends"]({},a.reactionTargetProps,{className:(i||(i=b("stylex")))(o.root),ref:a.reactionTargetRef,children:d.map(function(a,d){var g=a.node;if(g==null)return null;var h=g.localized_name;g=g.reaction_type;if(g==null)throw b("unrecoverableViolation")("CometUFITopReactions: Expected reaction_type on reaction","ufi2");var i;switch(d){case 0:i=o.firstReaction;break;case 1:i=o.secondReaction;break;case 2:i=o.thirdReaction;break;default:b("recoverableViolation")("There seem to be more than three reactions in this top reactions pile. You need to update this z-index code now.","ufi2")}return k.jsx(p,{feedbackTargetID:f==null?void 0:f.id,i18nReactionCount:a==null?void 0:a.i18n_reaction_count,localizedName:h,noBorder:c,reactionType:g,shouldNotOpenTopReactorsDialogOnClick:e,xstyle:i},h)})}))})}e.exports=a}),null);
__d("useCometUFICodedErrorDialog",["CometPlaceholder.react","JSResource","React","SilenceableErrorMessageUtils","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";var g=b("React");c=b("React");var h=c.useCallback,i=c.useState,j=b("SilenceableErrorMessageUtils").getMetadataFromError,k=b("SilenceableErrorMessageUtils").shouldHideErrorMessage,l=b("lazyLoadComponent")(b("JSResource")("CometUFICodedErrorDialog.react").__setRef("useCometUFICodedErrorDialog"));function a(){var a=i(null),c=a[0],d=a[1];a=h(function(a){a.code!=null&&d(a)},[d]);var e=h(function(){return d(null)},[d]);if(c==null)return{errorDialog:null,setError:a};var f=j(c);return{errorDialog:k(f)?null:g.jsx(b("CometPlaceholder.react"),{fallback:g.jsx(g.Fragment,{}),children:g.jsx(l,{error:c,onClose:e})}),setError:a}}e.exports=a}),null);
__d("CometVideoHomeVideoContextMenuContents.entrypoint",["JSResource","CometVideoHomeVideoContextMenuContentsQuery$Parameters"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){var c=a.storyDebugInfo,d=a.videoID;a=a.videoMenuLocation;return{queries:{menuContentsQuery:{parameters:b("CometVideoHomeVideoContextMenuContentsQuery$Parameters"),variables:{story_debug_info:c,videoID:d,videoMenuLocation:a}}}}},root:b("JSResource")("CometVideoHomeVideoContextMenuContents.react").__setRef("CometVideoHomeVideoContextMenuContents.entrypoint")};e.exports=a}),null);
__d("CometVideoHomeVideoContextMenu.react",["CometEntryPointPopoverTrigger.react","CometTrackingNodeProvider.react","CometVideoHomeVideoContextMenuContents.entrypoint","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");function a(a){var c=a.button,d=a.enableLogging;d=d===void 0?!0:d;var e=a.hideableToken,f=a.identifierToken,h=a.onHideVideo,i=a.onUnsaveVideo,j=a.storyDebugInfo,k=a.tracking,l=a.videoChannelType,m=a.videoID;a=a.videoMenuLocation;return m==null?null:g.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:55,children:g.jsx(b("CometEntryPointPopoverTrigger.react"),{align:"end",entryPointParams:{storyDebugInfo:j,videoID:m,videoMenuLocation:a},otherProps:{enableLogging:d,hideableToken:e,identifierToken:f,onHideVideo:h,onUnsaveVideo:i,tracking:k,videoChannelType:l},popoverEntryPoint:b("CometVideoHomeVideoContextMenuContents.entrypoint"),children:c})})}e.exports=a}),null);
__d("CometVideoHomeThreeDotContextMenu.react",["ix","fbt","CometPressable.react","CometVideoHomeVideoContextMenu.react","React","TetraIcon.react","fbicon"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){var c=a.color,d=c===void 0?"primary":c,e=a.onPress;c=a.stopPropagation;c=c===void 0?!1:c;a=babelHelpers.objectWithoutPropertiesLoose(a,["color","onPress","stopPropagation"]);a=i.jsx(b("CometVideoHomeVideoContextMenu.react"),babelHelpers["extends"]({button:function(a,c){return i.jsx(b("CometPressable.react"),{display:"inline",label:h._("More"),onPress:e?function(a){e(),c(a)}:c,overlayDisabled:!0,ref:a,children:i.jsx(b("TetraIcon.react"),{color:d,icon:b("fbicon")._(g("484390"),20)})})}},a));return c?i.jsx("div",{onClick:function(a){a.stopPropagation()},children:a}):a}e.exports=a}),null);
__d("CometVideoHomeStoryContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext({hideableToken:null,identifierToken:null,tracking:null});e.exports=c}),null);
__d("CometVideoHomeThreeDotContextMenuWrapper.react",["CometRelay","CometVideoHomeStoryContext","CometVideoHomeThreeDotContextMenu.react","CometVideoHomeThreeDotContextMenuWrapperContext","React","VideoHomeTypedLoggerLite","CometVideoHomeThreeDotContextMenuWrapper_video.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("CometRelay").graphql;var h=b("CometRelay").useFragment,i=b("React");c=b("React");var j=c.useContext,k=c.useState;function a(a){var c=a.color;c=c===void 0?"white":c;var d=a.video,e=a.videoChannelType;a=a.videoMenuLocation;d=h(g!==void 0?g:g=b("CometVideoHomeThreeDotContextMenuWrapper_video.graphql"),d);var f=d.id;d=k(!1);var l=d[0],m=d[1];d=j(b("CometVideoHomeStoryContext"));var n=d.hideableToken,o=d.identifierToken;d=d.tracking;var p=j(b("CometVideoHomeThreeDotContextMenuWrapperContext")),q=p.contextMenuEnabled,r=p.onHideVideo,s=p.tabType;q===null;if(q!==!0)return null;return f==null?null:i.jsx(b("CometVideoHomeThreeDotContextMenu.react"),{color:c,hideableToken:n,identifierToken:o,onHideVideo:function(){r&&r(f)},onPress:l?null:function(){b("VideoHomeTypedLoggerLite").log({click_target:"context_menu",event:"click",tab_type:s}),m(!0)},stopPropagation:!0,tracking:d,videoChannelType:e,videoID:f,videoMenuLocation:a||"VIDEO_HOME_LIVE_TAB"})}e.exports=a}),null);
__d("ContextualConfigConstants",[],(function(a,b,c,d,e,f){"use strict";a=1e3;b=", ";c={SAME:"same",NULL:"null",NNULL:"nnull",CATCH_ALL:"catch_all",EQ:"eq",NEQ:"neq",LT:"lt",LTE:"lte",GT:"gt",GTE:"gte",COR:"cor",CONTAINS:"contains",REGEX:"regex",IN:"in",NIN:"nin"};d={DENSE:"dense",MULTI_OUTPUT_RESOLVED:"multi-output-resolved",TABLE:"table"};f=[];var g=[],h=[],i={BAD_BOOLEAN_FORMAT:"Bad boolean format",BAD_CONFIG:"Bad config",BAD_CONTEXT_IDENTIFIER:"Bad context identifier",BAD_CONTEXT_VALUE:"Bad context value",BAD_MONITORED_CONTEXTS:"Bad monitored contexts",BAD_NUMBER_FORMAT:"Bad number format",BAD_OUTPUT_NAME:"Bad output name",BAD_OUTPUT_TYPE:"Bad output type",BAD_VALUE_ORDER:"Bad values order",DUPLICATE_OUTPUT_NAME:"Duplicate output name",ILLEGAL_BOOLEAN_STRATEGY:"Illegal boolean strategy",ILLEGAL_BUCKET_VALUES:"Illegal bucket values",ILLEGAL_NUMERIC_STRATEGY:"Illegal numeric strategy",ILLEGAL_STRING_STRATEGY:"Illegal string strategy",INVALID_BOOLEAN:"Invalid boolean",INVALID_FLOAT:"Invalid float",INVALID_INTEGER:"Invalid integer",INVALID_STRING:"Invalid string",INVALID_VALUE_TYPE:"Invalid value type",MISMATCH_NUMBER_OF_VALUES:"Mismatching number of values",MISSING_BUCKETS:"Missing buckets",MISSING_BUCKET_MATCH:"Missing bucket match",MISSING_BUCKET_NAME:"Missing bucket name",MISSING_BUCKET_STRATEGY:"Missing bucket strategy",MISSING_CONTEXT_IN_CONFIG:"Missing context in config",MISSING_DEFAULT_VALUE:"Missing default value",MISSING_OUTPUTS_DEFINITION:"Missing outputs field definition",MISSING_RESULTS:"Missing results",MISSING_TABLE:"Missing table",MISSING_TABLE_ITEM_BUCKET:"Missing table item bucket",MISSING_TABLE_ITEM_VALUES:"Missing table item values",MISSING_VECTOR:"Missing vector",REGEX_SYNTAX_ERROR:"Regex syntax error",REQUESTED_PARAM_NOT_FOUND:"Requested param not found",RESULTS_VECTOR_SIZE_MISMATCH:"Results vector size mismatch",UNDECLARED_OUTPUT_PARAM:"Undeclared output param",UNKNOWN_BUCKET_DEFINITION:"Unknown bucket definition",UNKNOWN_CONFIG_TYPE:"Unknown config type",UNSUPPORTED_CONFIG_VERSION:"Unsupported config version"},j=10,k=", ",l={BOOL:"BOOL",FLOAT:"FLOAT",INT:"INT",STRING:"STRING"};e.exports={ANALYTICS_SAMPLE_RATE:a,BUCKET_DELIMITER:b,CONTEXT_BUCKET_STRATEGY:c,CONFIG_TYPE:d,EMPTY_RESOLVED_CONTEXTS:f,EMPTY_RESOLVED_MONITORS:g,EMPTY_RESULT_PARAMS:h,ERROR:i,JSON_SUB_SAMPLE_RATE:j,LIST_DELIMITER:k,TYPE:l}}),null);
__d("ContextualConfigResolvedContextsUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.bucketIndex;if(e==void 0)break;b.push(e)}return b};b=function(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.bucketName;if(e===void 0)break;b.push(e)}return b};var g=function(a){return a.name};c=function(a){return a.map(g)};d=function(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e=e.value;if(e===void 0)break;b.push(e)}return b};e.exports={getBucketIndices:a,getBucketNames:b,getContextNames:c,getContextValues:d}}),null);
__d("ContextualConfigCollateExposureData",["ContextualConfigConstants","ContextualConfigResolvedContextsUtils"],(function(a,b,c,d,e,f){"use strict";var g=b("ContextualConfigConstants").ANALYTICS_SAMPLE_RATE,h=b("ContextualConfigConstants").LIST_DELIMITER,i=b("ContextualConfigResolvedContextsUtils").getBucketNames,j=b("ContextualConfigResolvedContextsUtils").getContextNames,k=b("ContextualConfigResolvedContextsUtils").getContextValues,l=["cfg_ver_timestamp","policy_id","version","sample_rate"],m=function(a){return a.join(h)},n=function(a,b){for(var c=0;c<l.length;c++){var d=l[c];b[d]!=null&&(a[d]=b[d])}b.name&&(a.config_name=b.name)},o=function(a,b){var c=b[0],d=b[1],e=b[2];b=b[3];c!=null&&(a.exception=c.message);a.result=m(d.map(function(a){return a.value}))||"INVALID";a.context=m(j(e));a.context_value=m(k(e));a.bucket_name=m(i(e));a.monitor=m(j(b));a.monitor_value=m(k(b))};a=function(a,b,c){var d={sample_rate:g};n(d,a);o(d,b);c&&(d.config_contents=JSON.stringify(a));return d};e.exports=a}),null);
__d("ContextualConfigExposureEvent",["Random"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d){this.$2=a,this.$4=b("Random").random()<1/a.sample_rate,this.$3=c,this.$1=d}var c=a.prototype;c.getData=function(){return this.$2};c.log=function(a){var b=this.$2,c=this.$3,d=this.$4;a&&c(b);d&&this.$1(b);return this};c.isSampled=function(){return this.$4};return a}();e.exports=a}),null);
__d("ContextualConfigExposureLoggerFactory",["ContextualConfigExposureEvent"],(function(a,b,c,d,e,f){"use strict";var g=function(){function a(a,b){this.$2=a,this.$1=b}var c=a.prototype;c.createEvent=function(a){var c=this.$1,d=this.$2;a=new(b("ContextualConfigExposureEvent"))(a,d,c);return a};return a}();a=function(a,b){return new g(a,b)};e.exports=a}),null);
__d("ContextualConfigExposureLogger",["ContextualConfigExposureLoggerFactory","MarauderLogger"],(function(a,b,c,d,e,f){"use strict";a=function(a){};c=function(a){b("MarauderLogger").log("contextual_config_exposure","",a)};e.exports=b("ContextualConfigExposureLoggerFactory")(a,c)}),null);
__d("ContextualConfigAssert",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){if(a===!1)throw new Error(b)};e.exports=a}),null);
__d("ContextualConfigValidators",["ContextualConfigConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("ContextualConfigConstants").TYPE;a=function(a){return Array.isArray(a)};c=function(a){return typeof a==="boolean"};d=function(a){return a!=null};f=function(a){return function(b){return Object.prototype.hasOwnProperty.call(a,b)}};b=function(a){return i(a)&&a%1===0};var h=function(a){return j(a)&&a.length>0},i=function(a){return typeof a==="number"&&!isNaN(a)&&a!==Infinity&&a!==-Infinity},j=function(a){return typeof a==="string"},k=function(a){switch(a){case g.BOOL:case g.FLOAT:case g.INT:case g.STRING:return!0;default:return!1}};e.exports={isArray:a,isBoolean:c,isDefined:d,isKey:f,isInteger:b,isNonEmptyString:h,isNumber:i,isString:j,isType:k}}),null);
__d("ContextualConfigParseBoolean",["ContextualConfigConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("ContextualConfigConstants").ERROR;a=function(a){switch(a.toUpperCase()){case"TRUE":return!0;case"FALSE":return!1;default:throw new Error(g.BAD_BOOLEAN_FORMAT)}};e.exports=a}),null);
__d("ContextualConfigParsePredBoolean",["ContextualConfigConstants","ContextualConfigParseBoolean"],(function(a,b,c,d,e,f){"use strict";var g=b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY,h=b("ContextualConfigConstants").ERROR;a=function(a,c){var d;switch(c){case g.SAME:var e=b("ContextualConfigParseBoolean")(a);d=function(a){return a===e};break;case g.NULL:d=function(a){return a==null};break;case g.NNULL:d=function(a){return a!=null};break;case g.CATCH_ALL:d=function(a){return!0};break;default:throw new Error(h.ILLEGAL_BOOLEAN_STRATEGY)}return function(a){return d(a)}};e.exports=a}),null);
__d("ContextualConfigParseFloat",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ContextualConfigConstants").ERROR,i=b("ContextualConfigValidators").isNumber,j=/^[-\+]?([1-9]\d*|0)(\.\d+)?$/,k=function(a){return j.test(a)};a=function(a){(g||(g=b("ContextualConfigAssert")))(k(a),h.BAD_NUMBER_FORMAT);a=parseFloat(a);g(i(a),h.BAD_NUMBER_FORMAT);return a};e.exports=a}),null);
__d("ContextualConfigParseInteger",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ContextualConfigConstants").ERROR,i=b("ContextualConfigValidators").isNumber,j=/^[-\+]?([1-9]\d*|0)$/,k=function(a){return j.test(a)};a=function(a){(g||(g=b("ContextualConfigAssert")))(k(a),h.BAD_NUMBER_FORMAT);a=parseInt(a,10);g(i(a),h.BAD_NUMBER_FORMAT);return a};e.exports=a}),null);
__d("ContextualConfigPredAssertions",["ContextualConfigAssert","ContextualConfigConstants"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ContextualConfigConstants").ERROR;a=function(a){return(g||(g=b("ContextualConfigAssert")))(a>0,h.MISMATCH_NUMBER_OF_VALUES)};c=function(a,c){return(g||(g=b("ContextualConfigAssert")))(a===c,h.MISMATCH_NUMBER_OF_VALUES)};d=function(a,c){return(g||(g=b("ContextualConfigAssert")))(a<c,h.BAD_VALUE_ORDER)};e.exports={assertHasValues:a,assertNumberOfValues:c,assertValueOrder:d}}),null);
__d("ContextualConfigParsePredNumeric",["ContextualConfigConstants","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigPredAssertions","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY,i=b("ContextualConfigConstants").ERROR,j=b("ContextualConfigPredAssertions").assertNumberOfValues,k=b("ContextualConfigPredAssertions").assertValueOrder,l=b("ContextualConfigValidators").isInteger;a=function(a,c,d,e){var f=d.map(e?b("ContextualConfigParseInteger"):g||(g=b("ContextualConfigParseFloat"))),m;switch(c){case h.SAME:var n=e?b("ContextualConfigParseInteger")(a):(g||(g=b("ContextualConfigParseFloat")))(a);m=function(a){return e&&!l(a)?!1:a===n};break;case h.NULL:m=function(a){return a==null};break;case h.NNULL:m=function(a){return a!=null};break;case h.CATCH_ALL:m=function(a){return!0};break;case h.COR:j(f.length,2);k(f[0],f[1]);m=function(a){if(typeof a!=="number")return!1;return e&&!l(a)?!1:a>=f[0]&&a<f[1]};break;case h.LT:j(f.length,1);m=function(a){if(typeof a!=="number")return!1;return e&&!l(a)?!1:a<f[0]};break;case h.LTE:j(f.length,1);m=function(a){if(typeof a!=="number")return!1;return e&&!l(a)?!1:a<=f[0]};break;case h.EQ:j(f.length,1);m=function(a){if(typeof a!=="number")return!1;return e&&!l(a)?!1:a===f[0]};break;case h.NEQ:j(f.length,1);m=function(a){if(typeof a!=="number")return!1;return e&&!l(a)?!1:a!==f[0]};break;case h.GT:j(f.length,1);m=function(a){if(typeof a!=="number")return!1;return e&&!l(a)?!1:a>f[0]};break;case h.GTE:j(f.length,1);m=function(a){if(typeof a!=="number")return!1;return e&&!l(a)?!1:a>=f[0]};break;default:throw new Error(i.ILLEGAL_NUMERIC_STRATEGY)}return function(a){return m(a)}};e.exports=a}),null);
__d("ContextualConfigParseRegExp",["ContextualConfigConstants"],(function(a,b,c,d,e,f){"use strict";var g=/^\/(.+)\/(.*)$/;a=b("ContextualConfigConstants").ERROR;c=function(b){try{var c=b.match(g);if(c!=null)return new RegExp(c[1],c[2]);else return new RegExp(b)}catch(b){throw new Error(a.REGEX_SYNTAX_ERROR)}};e.exports=c}),null);
__d("ContextualConfigParsePredString",["ContextualConfigConstants","ContextualConfigParseRegExp","ContextualConfigPredAssertions"],(function(a,b,c,d,e,f){"use strict";var g=b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY,h=b("ContextualConfigConstants").ERROR,i=b("ContextualConfigPredAssertions").assertHasValues,j=b("ContextualConfigPredAssertions").assertNumberOfValues,k=function(a){if(typeof a!=="string")throw new Error(h.INVALID_VALUE_TYPE);return a},l=function(a){var b=[];for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;b.push(k(e))}return b};a=function(a,c,d){var e=l(d),f;switch(c){case g.SAME:f=function(b){return typeof b!=="string"?!1:b===a};break;case g.NULL:f=function(a){return a==null};break;case g.NNULL:f=function(a){return a!=null};break;case g.CATCH_ALL:f=function(a){return!0};break;case g.IN:i(e.length);f=function(a){return typeof a!=="string"?!1:e.indexOf(a)!==-1};break;case g.NIN:i(e.length);f=function(a){return typeof a!=="string"?!1:e.indexOf(a)===-1};break;case g.CONTAINS:j(e.length,1);f=function(a){return typeof a!=="string"?!1:a.indexOf(e[0])!==-1};break;case g.REGEX:j(e.length,1);var k=b("ContextualConfigParseRegExp")(e[0]);f=function(a){return typeof a!=="string"?!1:k.test(a)};break;default:throw new Error(h.ILLEGAL_STRING_STRATEGY)}return function(a){return f(a)}};e.exports=a}),null);
__d("ContextualConfigParseContextBuckets",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParsePredBoolean","ContextualConfigParsePredNumeric","ContextualConfigParsePredString","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g;a=b("ContextualConfigConstants").CONTEXT_BUCKET_STRATEGY;var h=b("ContextualConfigConstants").ERROR,i=b("ContextualConfigConstants").TYPE,j=(c=b("ContextualConfigValidators")).isArray,k=c.isDefined;d=c.isKey;var l=c.isNonEmptyString,m=c.isString,n=function(a){return(g||(g=b("ContextualConfigAssert")))(k(a),h.MISSING_BUCKETS)},o=function(a){return(g||(g=b("ContextualConfigAssert")))(j(a),h.MISSING_BUCKETS)},p=d(a),q=function(a){return(g||(g=b("ContextualConfigAssert")))(m(a)&&p(a.toUpperCase()),h.MISSING_BUCKET_STRATEGY)},r=function(a){return(g||(g=b("ContextualConfigAssert")))(j(a),h.ILLEGAL_BUCKET_VALUES)},s=function(a){return(g||(g=b("ContextualConfigAssert")))(l(a),h.MISSING_BUCKET_NAME)},t=function(a,c){var d=c.name;s(d);var e=c.strategy;q(e);c=c.values||[];r(c);switch(a){case i.BOOL:return b("ContextualConfigParsePredBoolean")(d,e);case i.FLOAT:return b("ContextualConfigParsePredNumeric")(d,e,c,!1);case i.INT:return b("ContextualConfigParsePredNumeric")(d,e,c,!0);case i.STRING:return b("ContextualConfigParsePredString")(d,e,c);default:throw new Error(h.UNKNOWN_BUCKET_DEFINITION)}},u=function(a,b){n(b);var c=b.name;s(c);return{name:c,pred:t(a,b)}};f=function(a,b){o(b);return b.map(function(b){return u(a,b)})};e.exports=f}),null);
__d("ContextualConfigParseContexts",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContextBuckets","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ContextualConfigConstants").ERROR,i=(a=b("ContextualConfigValidators")).isArray,j=a.isDefined,k=a.isNonEmptyString,l=a.isType,m=function(a){return(g||(g=b("ContextualConfigAssert")))(j(a),h.BAD_CONTEXT_IDENTIFIER)},n=function(a){return(g||(g=b("ContextualConfigAssert")))(i(a)&&a.length>0,h.MISSING_CONTEXT_IN_CONFIG)},o=function(a){return(g||(g=b("ContextualConfigAssert")))(k(a),h.BAD_CONTEXT_IDENTIFIER)},p=function(a){return(g||(g=b("ContextualConfigAssert")))(l(a),h.BAD_CONTEXT_IDENTIFIER)},q=function(a){m(a);var c=a.name,d=a.type;a=a.buckets;o(c);p(d);return{name:c,type:d,buckets:b("ContextualConfigParseContextBuckets")(d,a)}};c=function(a){n(a);return a.map(q)};e.exports=c}),null);
__d("ContextualConfigIsEqualParams",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c+=1){var d=a[c],e=b[c];if(d.name!==e.name||d.type!==e.type)return!1}return!0};e.exports=a}),null);
__d("ContextualConfigParseResultParamValue",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseBoolean","ContextualConfigParseFloat","ContextualConfigParseInteger","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h,i=b("ContextualConfigConstants").ERROR,j=b("ContextualConfigConstants").TYPE,k=b("ContextualConfigValidators").isString,l=function(a){return(g||(g=b("ContextualConfigAssert")))(k(a),i.INVALID_STRING)};a=function(a,c){l(c);switch(a){case j.BOOL:return b("ContextualConfigParseBoolean")(c);case j.FLOAT:return(h||(h=b("ContextualConfigParseFloat")))(c);case j.INT:return b("ContextualConfigParseInteger")(c);case j.STRING:return c;default:throw new Error(i.INVALID_VALUE_TYPE)}};e.exports=a}),null);
__d("ContextualConfigParseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h,i=b("ContextualConfigConstants").ERROR,j=(a=b("ContextualConfigValidators")).isArray,k=a.isDefined,l=a.isNonEmptyString,m=a.isType,n=function(a){return(g||(g=b("ContextualConfigAssert")))(j(a),i.MISSING_RESULTS)},o=function(a){return(g||(g=b("ContextualConfigAssert")))(k(a),i.BAD_CONTEXT_VALUE)},p=function(a){return(g||(g=b("ContextualConfigAssert")))(l(a),i.BAD_CONTEXT_VALUE)},q=function(a){return(g||(g=b("ContextualConfigAssert")))(m(a),i.BAD_CONTEXT_VALUE)},r=function(a,b){for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e.name===b)return e.type}throw new Error(i.UNDECLARED_OUTPUT_PARAM)},s=function(a){return function(c){o(c);var d=c.name;p(d);var e=r(a,d);q(e);c=(h||(h=b("ContextualConfigParseResultParamValue")))(e,c.value);return{name:d,type:e,value:c}}};c=function(a,b){n(b);return b.map(s(a))};e.exports=c}),null);
__d("ContextualConfigParseDenseResultParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ContextualConfigConstants").ERROR,i=function(a,c){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigIsEqualParams")(a,c),h.RESULTS_VECTOR_SIZE_MISMATCH)};a=function(a,c){c=b("ContextualConfigParseResultParams")(a,c.map(function(b,c){return{name:a[c].name,value:b}}));i(a,c);return c};e.exports=a}),null);
__d("ContextualConfigParseDenseDefaults",["ContextualConfigConstants","ContextualConfigParseDenseResultParams"],(function(a,b,c,d,e,f){"use strict";a=b("ContextualConfigConstants").ERROR;c=function(c,d){try{return b("ContextualConfigParseDenseResultParams")(c,d)}catch(b){throw new Error(a.MISSING_DEFAULT_VALUE)}};e.exports=c}),null);
__d("ContextualConfigParseMonitors",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ContextualConfigConstants").ERROR,i=(a=b("ContextualConfigValidators")).isArray,j=a.isDefined,k=a.isNonEmptyString,l=a.isType,m=function(a){return(g||(g=b("ContextualConfigAssert")))(j(a),h.BAD_CONTEXT_IDENTIFIER)},n=function(a){return(g||(g=b("ContextualConfigAssert")))(i(a),h.BAD_MONITORED_CONTEXTS)},o=function(a){return(g||(g=b("ContextualConfigAssert")))(k(a),h.BAD_CONTEXT_IDENTIFIER)},p=function(a){return(g||(g=b("ContextualConfigAssert")))(l(a),h.BAD_CONTEXT_IDENTIFIER)},q=function(a){m(a);var b=a.name;a=a.type;o(b);p(a);return{name:b,type:a}};c=function(a){n(a);return a.map(q)};e.exports=c}),null);
__d("ContextualConfigParseOutputParams",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f){var g,h=b("ContextualConfigConstants").ERROR,i=b("ContextualConfigValidators").isArray,j=b("ContextualConfigValidators").isNonEmptyString,k=b("ContextualConfigValidators").isType,l=function(a){return(g||(g=b("ContextualConfigAssert")))(i(a),h.MISSING_OUTPUTS_DEFINITION)},m=function(a){return(g||(g=b("ContextualConfigAssert")))(k(a),h.BAD_OUTPUT_TYPE)},n=function(a){return(g||(g=b("ContextualConfigAssert")))(j(a),h.BAD_OUTPUT_NAME)},o=function(a){return(g||(g=b("ContextualConfigAssert")))(p(a),h.DUPLICATE_OUTPUT_NAME)},p=function(a){var b={};for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(b[e.name])return!1;b[e.name]=!0}return!0},q=function(a){n(a.name);m(a.type);return a};a=function(a){l(a);a=a.map(q);o(a);return a};e.exports=a}),null);
__d("ContextualConfigParseVector",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseResultParamValue","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h,i=b("ContextualConfigConstants").ERROR,j=b("ContextualConfigValidators").isArray,k=function(a){return(g||(g=b("ContextualConfigAssert")))(j(a),i.MISSING_VECTOR)},l=function(a,c){return(g||(g=b("ContextualConfigAssert")))(a===c,i.RESULTS_VECTOR_SIZE_MISMATCH)},m=function(a,c){l(a.length,c.length);for(var d=0;d<a.length;d+=1){var e=a[d].type,f=c[d];(h||(h=b("ContextualConfigParseResultParamValue")))(e,f)}},n=function(a){return a.reduce(function(a,b){b=b.buckets;return a*b.length},1)};a=function(a,b,c){k(c);b=n(b);var d=a.length;l(b*d,c.length);for(var e=0;e<b;e+=1){var f=e*d;m(a,c.slice(f,f+d))}return c};e.exports=a}),null);
__d("ContextualConfigResolveContexts",["ContextualConfigConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("ContextualConfigConstants").ERROR,h=function(a,b){for(var c=0;c<a.length;c+=1){var d=a[c];try{if(d.pred(b))return[d.name,c]}catch(a){return null}}return null};a=function(a,b,c){var d=null;a=a.map(function(a){var e=a.name,f={name:e};if(d!=null)return f;var i;c[e]!=null?i=c[e]:b[e]!=null?i=b[e]():i=null;f.value=i;if(a.buckets!=null){e=h(a.buckets,i);if(e==null){d=new Error(g.MISSING_BUCKET_MATCH);return f}a=e[0];i=e[1];f.bucketName=a;f.bucketIndex=i}return f});return[d,a]};e.exports=a}),null);
__d("DenseContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseContexts","ContextualConfigParseDenseDefaults","ContextualConfigParseDenseResultParams","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseVector","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g;a=b("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS;var h=b("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS,i=b("ContextualConfigConstants").ERROR,j=b("ContextualConfigResolvedContextsUtils").getBucketIndices,k=b("ContextualConfigValidators").isDefined,l=function(a){return(g||(g=b("ContextualConfigAssert")))(k(a),i.BAD_CONFIG)},m=function(a){var b=[],c=1;for(var d=a.length-1;d>=0;d-=1)b.push(c),c*=a[d].buckets.length;return b.reverse()},n=function(a,c,d,e){try{c=c.slice(d,d+a.length);return[null,b("ContextualConfigParseDenseResultParams")(a,c)]}catch(a){return[a,e]}},o=function(a,c,d){try{d=d.reduce(function(c,d,e){(g||(g=b("ContextualConfigAssert")))(e<a.length,"Auxillery index out of range.");return c+a[e]*d},0);return[null,d*c]}catch(a){return[a,-1]}};c=function(){function c(a,c){l(a);this.globalContextProviders=babelHelpers["extends"]({},c);c=b("ContextualConfigParseOutputParams")(a.outputs);var d=b("ContextualConfigParseContexts")(a.contexts);this.aux=m(d);this.contexts=d;this.defaults=b("ContextualConfigParseDenseDefaults")(c,a.vectorDefaults);this.monitors=a.monitors!=null?b("ContextualConfigParseMonitors")(a.monitors):[];this.outputs=c;this.vector=b("ContextualConfigParseVector")(c,d,a.vector)}var d=c.prototype;d.resolve=function(b){try{return this.unsafeResolve(b)}catch(b){return[b,this.defaults,a,h]}};d.unsafeResolve=function(a){var c=this.aux,d=this.globalContextProviders,e=this.contexts,f=this.defaults,g=this.monitors,i=this.outputs,k=this.vector;e=b("ContextualConfigResolveContexts")(e,d,a);var l=e[0];e=e[1];if(l!=null)return[l,f,e,h];l=o(c,i.length,j(e));c=l[0];l=l[1];if(c!=null)return[c,f,e,h];c=n(i,k,l,f);i=c[0];k=c[1];if(i!=null)return[i,k,e,h];l=b("ContextualConfigResolveContexts")(g,d,a);f=l[0];c=l[1];return f!=null?[f,k,e,h]:[null,k,e,c]};return c}();e.exports=c}),null);
__d("MultiOutputResolvedContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseResultParams","ContextualConfigResolveContexts","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,i=b("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS,j=b("ContextualConfigConstants").ERROR,k=b("ContextualConfigValidators").isDefined,l=function(a){return(g||(g=b("ContextualConfigAssert")))(k(a),j.BAD_CONFIG)};a=function(){function a(a,c){l(a);this.globalContextProviders=babelHelpers["extends"]({},c);c=b("ContextualConfigParseOutputParams")(a.outputs);this.monitors=a.monitors!=null?b("ContextualConfigParseMonitors")(a.monitors):[];this.values=b("ContextualConfigParseResultParams")(c,a.values)}var c=a.prototype;c.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.values,h,i]}};c.unsafeResolve=function(a){var c=this.globalContextProviders,d=this.monitors,e=this.values;d=b("ContextualConfigResolveContexts")(d,c,a);c=d[0];a=d[1];return c!=null?[c,e,h,i]:[null,e,h,a]};return a}();e.exports=a}),null);
__d("ContextualConfigMergePartialResultParams",[],(function(a,b,c,d,e,f){"use strict";a=function(a,b){var c={};for(var b=b,d=Array.isArray(b),e=0,b=d?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;c[f.name]=f}f=[];for(var e=a,d=Array.isArray(e),b=0,e=d?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(d){if(b>=e.length)break;a=e[b++]}else{b=e.next();if(b.done)break;a=b.value}a=a;var g=c[a.name];f.push(g!=null&&g.name===a.name&&g.type===a.type?g:a)}return f};e.exports=a}),null);
__d("ContextualConfigParseDefaults",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigIsEqualParams","ContextualConfigParseResultParams"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ContextualConfigConstants").ERROR,i=function(a,c){return(g||(g=b("ContextualConfigAssert")))(b("ContextualConfigIsEqualParams")(a,c),h.MISSING_DEFAULT_VALUE)};a=function(a,c){c=b("ContextualConfigParseResultParams")(a,c);i(a,c);return c};e.exports=a}),null);
__d("ContextualConfigParseTable",["ContextualConfigAssert","ContextualConfigParseResultParams","ContextualConfigConstants","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ContextualConfigConstants").ERROR,i=b("ContextualConfigValidators").isArray,j=b("ContextualConfigValidators").isDefined,k=b("ContextualConfigValidators").isNonEmptyString,l=function(a){return(g||(g=b("ContextualConfigAssert")))(i(a),h.MISSING_TABLE)},m=function(a){return(g||(g=b("ContextualConfigAssert")))(j(a),h.MISSING_TABLE)},n=function(a){return(g||(g=b("ContextualConfigAssert")))(k(a),h.MISSING_TABLE_ITEM_BUCKET)},o=function(a){return(g||(g=b("ContextualConfigAssert")))(i(a),h.MISSING_TABLE_ITEM_VALUES)},p=function(a,c){m(c);var d=c.bucket;c=c.values;n(d);o(c);return{bucket:d,values:b("ContextualConfigParseResultParams")(a,c)}};a=function(a,b){l(b);return b.reduce(function(b,c){c=p(a,c);b[c.bucket]=c.values;return b},{})};e.exports=a}),null);
__d("TableContextualConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigMergePartialResultParams","ContextualConfigParseContexts","ContextualConfigParseDefaults","ContextualConfigParseMonitors","ContextualConfigParseOutputParams","ContextualConfigParseTable","ContextualConfigResolveContexts","ContextualConfigResolvedContextsUtils","ContextualConfigValidators"],(function(a,b,c,d,e,f){"use strict";var g,h=(a=b("ContextualConfigConstants")).BUCKET_DELIMITER;c=a.EMPTY_RESOLVED_CONTEXTS;d=a.EMPTY_RESOLVED_MONITORS;var i=a.ERROR,j=b("ContextualConfigResolvedContextsUtils").getBucketNames,k=b("ContextualConfigValidators").isDefined,l=[],m=function(a){return(g||(g=b("ContextualConfigAssert")))(k(a),i.BAD_CONFIG)};f=function(){function a(a,c){m(a);this.globalContextProviders=babelHelpers["extends"]({},c);c=b("ContextualConfigParseOutputParams")(a.outputs);this.contexts=b("ContextualConfigParseContexts")(a.contexts);this.defaults=b("ContextualConfigParseDefaults")(c,a.defaults);this.monitors=a.monitors!=null?b("ContextualConfigParseMonitors")(a.monitors):[];this.table=b("ContextualConfigParseTable")(c,a.table)}var e=a.prototype;e.resolve=function(a){try{return this.unsafeResolve(a)}catch(a){return[a,this.defaults,c,d]}};e.unsafeResolve=function(a){var c=this.globalContextProviders,d=this.contexts,e=this.defaults,f=this.monitors,g=this.table;d=b("ContextualConfigResolveContexts")(d,c,a);var i=d[0];d=d[1];if(i!=null)return[i,e,d,[]];i=j(d).join(h);g=g[i]||l;i=b("ContextualConfigMergePartialResultParams")(e,g);e=b("ContextualConfigResolveContexts")(f,c,a);g=e[0];f=e[1];return g!=null?[g,i,d,[]]:[null,i,d,f]};return a}();e.exports=f}),null);
__d("ContextualConfigParseConfig",["ContextualConfigAssert","ContextualConfigConstants","ContextualConfigValidators","DenseContextualConfig","MultiOutputResolvedContextualConfig","TableContextualConfig"],(function(a,b,c,d,e,f){"use strict";var g,h=b("ContextualConfigConstants").CONFIG_TYPE,i=b("ContextualConfigConstants").ERROR,j=b("ContextualConfigValidators").isDefined,k=[1],l=function(a){return(g||(g=b("ContextualConfigAssert")))(j(a)&&j(a.version),i.BAD_CONFIG)},m=function(a){return(g||(g=b("ContextualConfigAssert")))(k.indexOf(a)!==-1,i.UNSUPPORTED_CONFIG_VERSION)};a=function(a,c){l(a);m(a.version);switch(a.cctype){case h.DENSE:return new(b("DenseContextualConfig"))(a,c);case h.MULTI_OUTPUT_RESOLVED:return new(b("MultiOutputResolvedContextualConfig"))(a,c);case h.TABLE:return new(b("TableContextualConfig"))(a,c);default:throw new Error(i.UNKNOWN_CONFIG_TYPE)}};e.exports=a}),null);
__d("ContextualConfigWarn",[],(function(a,b,c,d,e,f){"use strict";a=function(a){};e.exports=a}),null);
__d("ContextualConfigResult",["ContextualConfigConstants","ContextualConfigWarn"],(function(a,b,c,d,e,f){"use strict";var g=b("ContextualConfigConstants").ERROR;a=function(){function a(a){this.$1=a.reduce(function(a,b){var c=b.name;b=b.value;a[c]=b;return a},{}),this.$2=a}var c=a.prototype;c.get=function(a,c){try{a=this.$1[a];if(typeof a!==typeof c){b("ContextualConfigWarn")(g.REQUESTED_PARAM_NOT_FOUND);return c}return a}catch(a){b("ContextualConfigWarn")(a.message);return c}};c.getParams=function(){return this.$2};return a}();e.exports=a}),null);
__d("ErrorContextualConfig",["ContextualConfigConstants"],(function(a,b,c,d,e,f){"use strict";var g=b("ContextualConfigConstants").EMPTY_RESOLVED_CONTEXTS,h=b("ContextualConfigConstants").EMPTY_RESOLVED_MONITORS,i=b("ContextualConfigConstants").EMPTY_RESULT_PARAMS;a=function(){function a(a){this.error=a}var b=a.prototype;b.resolve=function(a){return[this.error,i,g,h]};return a}();e.exports=a}),null);
__d("ContextualConfig",["ContextualConfigCollateExposureData","ContextualConfigConstants","ContextualConfigExposureLogger","ContextualConfigParseConfig","ContextualConfigResult","ErrorContextualConfig","Random"],(function(a,b,c,d,e,f){"use strict";a=b("ContextualConfigConstants").JSON_SUB_SAMPLE_RATE;var g=1/a,h=1;c=function(){function a(a,b){b===void 0&&(b={}),this.isDebugLoggingEnabled=!1,this.$3=!1,this.$4=a,this.$2=b}var c=a.prototype;c.$5=function(){if(this.$1)return this.$1;var a=this.$2,c=this.$4;try{c=b("ContextualConfigParseConfig")(c,a)}catch(a){c=new(b("ErrorContextualConfig"))(a)}this.$1=c;return c};c.$6=function(a){var c=this.isDebugLoggingEnabled,d=this.$4,e=this.$3;e=!e&&b("Random").random()<g;e&&(this.$3=!0);d=b("ContextualConfigCollateExposureData")(d,a,e);a=b("ContextualConfigExposureLogger").createEvent(d);a.log(c)};c.resolve=function(a){a===void 0&&(a={});var c=this.$1||this.$5();c=c.resolve(a);this.$6(c);return new(b("ContextualConfigResult"))(c[h])};return a}();e.exports=c}),null);